# PBI作成ベストプラクティス クイックリファレンス

> **📘 完全版**: このクイックリファレンスは要約版です。詳細は [PBI-CREATION-BEST-PRACTICES.md](../core/PBI-CREATION-BEST-PRACTICES.md) を参照してください。

## 📋 ドキュメント情報

| 項目 | 内容 |
|------|------|
| **対象読者** | AIエージェント、開発チーム、Product Owner |
| **目的** | 高品質なPBI作成のための重要原則とチェックリストの提供 |
| **完全版サイズ** | 88 KB（約45,000トークン） |
| **推奨利用法** | 日常的なPBI作成にはこのQuick Refを、複雑なケースには完全版を参照 |

---

## 🎯 PBI作成の5大原則

### 1. 明確な価値の提供

**すべてのPBIは、ビジネス価値または技術的価値を明確に示す必要があります。**

✅ **Good**: 「ユーザーが商品を素早く検索できるようにすることで、購入率を向上させる」  
❌ **Bad**: 「検索機能を追加する」← なぜ必要なのか不明

### 2. ステークホルダーの視点

**誰のため**に、**何を**実現するのかを明確にします。

主要なステークホルダー:
- エンドユーザー（実際にシステムを使用する人）
- ビジネスオーナー（ビジネス目標を持つ人）
- 開発チーム（実装する技術者）
- 運用チーム（システムを保守・運用する人）

### 3. 完結性と独立性

各PBIは、可能な限り**独立して完結**できるようにします。

### 4. 適切な粒度

PBIは、**1スプリント以内**（通常1-2週間）で完了できる粒度が理想です。

| サイズ | ストーリーポイント | 期間目安 | 適切性 |
|--------|-----------------|---------|--------|
| Extra Small | 1-2 | 1-2日 | ✅ 最適 |
| Small | 3-5 | 3-5日 | ✅ 良好 |
| Medium | 8 | 1週間 | ⚠️ 分割検討 |
| Large | 13 | 2週間 | ❌ 分割必須 |
| Extra Large | 21+ | 2週間以上 | ❌ Epic化して分割 |

### 5. 検証可能性

PBIの完了条件は、**客観的に検証可能**である必要があります。

✅ **検証可能**: ユーザーが5秒以内に検索結果を取得できる  
❌ **検証不可能**: 使いやすいUIを提供する ← 主観的

---

## 📐 INVEST原則（6つの基準）

### I - Independent（独立性）
他のPBIに依存せず、独立して実装・テスト・デプロイが可能である。

**チェックポイント**:
- ✅ このPBIは他のPBIが完了していなくても着手できるか？
- ✅ 他のPBIと並行して開発できるか？
- ✅ 依存関係が最小化されているか？

### N - Negotiable（交渉可能性）
実装の詳細は固定せず、開発チームとプロダクトオーナーが対話しながら調整できる。

**固定すべき**: ビジネス目標、受け入れ基準、セキュリティ要件  
**交渉可能**: 実装技術、UI/UXの詳細、パフォーマンス目標値

### V - Valuable（価値がある）
ステークホルダーにとって明確な価値を提供する。

| 価値タイプ | 説明 | 例 |
|----------|------|-----|
| **ビジネス価値** | 売上・顧客満足度向上 | 「購入率を10%向上させる」 |
| **ユーザー価値** | ユーザー体験の改善 | 「操作時間を30秒短縮」 |
| **技術的価値** | 保守性・拡張性向上 | 「デプロイ時間を50%削減」 |
| **リスク軽減** | セキュリティ・安定性向上 | 「データ漏洩リスクを排除」 |

### E - Estimable（見積もり可能）
開発チームが作業量を合理的に見積もれるだけの情報が含まれている。

**見積もりを困難にする要因**:
- 要件の曖昧さ → 受け入れ基準を具体化
- 技術的不確実性 → Spike/POCで調査
- 依存関係の複雑さ → 技術調査で依存を明確化
- スコープが大きすぎ → PBIを分割

### S - Small（小さい）
1スプリント（通常1-2週間）以内に完了できる適切なサイズである。

**理想的なサイズ**:
- 📊 ストーリーポイント: 3-5ポイント
- ⏱️ 期間: 2-5日
- 👥 担当者: 1-2名

**大きすぎる場合のサイン**:
- ⚠️ 8ポイント以上
- ⚠️ 1週間以上かかる
- ⚠️ 3名以上必要
- ⚠️ 複数のサブシステムに跨る

### T - Testable（テスト可能）
PBIの完了を客観的に検証できる明確なテスト基準が存在する。

**テスト可能性の3要素**:
1. 明確な受け入れ基準: 何をもって「完了」とするか
2. 検証方法: どうやってテストするか
3. 合格基準: どの状態なら合格か

---

## 📝 PBIタイプ別作成ガイドライン（8タイプ）

| ID | タイプ名 | 略称 | 主な用途 |
|----|---------|------|---------|
| 1 | 新規プロジェクト立ち上げ | **NPI** | プロジェクト全体の初期構築 |
| 2 | 新規機能開発 | **NFD** | 新しいビジネス機能・ユースケースの追加 |
| 3 | 既存機能追加・改修 | **ENH** | 既存機能の拡張・改善 |
| 4 | バグ修正 | **BUG** | 不具合の修正 |
| 5 | リファクタリング | **REF** | コード品質改善（機能変更なし） |
| 6 | 設計変更・アーキテクチャ改善 | **ARC** | 根本的な設計・アーキテクチャの見直し |
| 7 | 緊急修正 | **HOT** | 24時間以内の緊急対応 |
| 8 | 実験的機能 | **POC** | 技術検証・概念実証 |

### 各タイプの重点ポイント

#### NPI（新規プロジェクト立ち上げ）
- ✅ プロジェクトビジョンの明確化
- ✅ 技術スタックの選定理由
- ✅ アーキテクチャ設計書の添付
- ✅ 初期リリース範囲（MVP）の定義

#### NFD（新規機能開発）
- ✅ ユーザーストーリー形式（As a... I want... So that...）
- ✅ 明確な受け入れ基準（Given-When-Then形式推奨）
- ✅ UIモックアップ・ワイヤーフレーム
- ✅ 非機能要件（パフォーマンス、セキュリティ等）

#### ENH（既存機能追加・改修）
- ✅ 現在の動作との違いを明記
- ✅ 既存ユーザーへの影響分析
- ✅ 後方互換性の考慮
- ✅ データ移行の必要性

#### BUG（バグ修正）
- ✅ 再現手順の明記
- ✅ 期待される動作 vs 実際の動作
- ✅ 影響範囲（どのユーザー・環境で発生するか）
- ✅ Severity（重大度）の評価

#### REF（リファクタリング）
- ✅ リファクタリングの目的と期待効果
- ✅ 機能変更がないことの確認
- ✅ 既存テストが全てパスすることを保証
- ✅ 技術的負債削減の定量的指標

#### ARC（アーキテクチャ改善）
- ✅ 現在のアーキテクチャの課題
- ✅ 改善後のアーキテクチャ設計
- ✅ 移行計画（段階的移行の戦略）
- ✅ リスク評価と軽減策

#### HOT（緊急修正）
- ✅ 緊急性の根拠（ビジネスインパクト）
- ✅ 影響を受けるユーザー数
- ✅ 応急処置 vs 根本対応の区別
- ✅ ロールバック計画

#### POC（実験的機能）
- ✅ 検証したい仮説の明記
- ✅ 成功基準（何をもって成功とするか）
- ✅ タイムボックス（時間制限）
- ✅ 学習目標と成果物

---

## 📋 ユーザーストーリーの書き方

### 基本テンプレート

```
As a [ユーザーロール]
I want [機能・目的]
So that [ビジネス価値・理由]
```

### 実例

**✅ Good Example**:
```
As a オンラインショッピングユーザー
I want 商品をキーワードで検索したい
So that 欲しい商品を素早く見つけて購入できる
```

**❌ Bad Example**:
```
検索機能を実装する
→ 誰のため？なぜ必要？が不明
```

### 受け入れ基準（Acceptance Criteria）の定義

**Given-When-Then形式（推奨）**:
```
Scenario: 商品キーワード検索

Given ユーザーがホーム画面にいる
When 検索ボックスに「ノートパソコン」と入力して検索ボタンをクリックする
Then 関連する商品リストが表示される
And 検索結果が5秒以内に表示される
And 各商品には画像、タイトル、価格が表示される
```

**チェックリスト形式**:
```
受け入れ基準:
- [ ] キーワードで商品を検索できる
- [ ] 検索結果が5秒以内に表示される
- [ ] 検索結果には画像、タイトル、価格が含まれる
- [ ] 存在しないキーワードの場合、「該当なし」メッセージを表示
- [ ] 検索履歴が保存される（最新5件）
```

---

## ✅ レビュー前のチェックリスト

### 基本情報

- [ ] タイトルは明確で具体的か？（動詞+目的）
- [ ] PBIタイプが正しく設定されているか？
- [ ] 優先度が適切に設定されているか？
- [ ] 見積もり（ストーリーポイント）が記載されているか？

### INVEST原則

- [ ] **Independent**: 他のPBIに依存せず独立しているか？
- [ ] **Negotiable**: 実装の詳細に柔軟性があるか？
- [ ] **Valuable**: 明確な価値を提供しているか？
- [ ] **Estimable**: 見積もりに必要な情報が揃っているか？
- [ ] **Small**: 1スプリント以内に完了できるサイズか？
- [ ] **Testable**: 客観的に検証可能な受け入れ基準があるか？

### 内容の完全性

- [ ] ユーザーストーリー（As a... I want... So that...）が記載されているか？
- [ ] 受け入れ基準が明確に定義されているか？
- [ ] 技術的制約・前提条件が記載されているか？
- [ ] 非機能要件（パフォーマンス、セキュリティ等）が考慮されているか？

### 品質担保

- [ ] テストケースを作成できるか？
- [ ] 完了の定義（Definition of Done）が満たせるか？
- [ ] リスク・懸念事項が明記されているか？
- [ ] 依存関係（Blocks/Blocked by）が記載されているか？

---

## 🚨 よくある失敗パターン（Top 10）

### 1. 曖昧なタイトル
❌ **Bad**: 「検索機能」  
✅ **Good**: 「ユーザーがキーワードで商品を検索できる機能」

### 2. 受け入れ基準が主観的
❌ **Bad**: 「使いやすいUIを提供する」  
✅ **Good**: 「検索結果が5秒以内に表示される」

### 3. PBIが大きすぎる
❌ **Bad**: 「ユーザー管理機能の完全実装」（21ポイント）  
✅ **Good**: 6つの独立したPBIに分割（各3-5ポイント）

### 4. 技術的な実装詳細を固定
❌ **Bad**: 「ReactのuseStateフックを使って実装する」  
✅ **Good**: 「ユーザーがリアルタイムで検索結果を取得できる」

### 5. 「なぜ」が欠如
❌ **Bad**: 「ログイン機能を追加する」  
✅ **Good**: 「ユーザーがログインすることで、個人化された体験を提供し、リピート率を向上させる」

### 6. 依存関係を無視
❌ **Bad**: 他のPBIが完了していないと着手できない  
✅ **Good**: 依存関係を明記し、並行開発可能に分割

### 7. 非機能要件の欠如
❌ **Bad**: 機能要件のみ記載  
✅ **Good**: パフォーマンス、セキュリティ、スケーラビリティを明記

### 8. テスト観点がない
❌ **Bad**: 受け入れ基準が曖昧  
✅ **Good**: Given-When-Then形式でテストシナリオを記載

### 9. ステークホルダーが不明
❌ **Bad**: 「システムを改善する」  
✅ **Good**: 「エンドユーザーが...できるようにすることで、ビジネスオーナーが...を達成する」

### 10. 価値の定量化がない
❌ **Bad**: 「ユーザー体験を向上させる」  
✅ **Good**: 「操作時間を30秒短縮し、コンバージョン率を5%向上させる」

---

## 🤖 AIエージェント向けクイックガイド

### PBI自動生成の手順

1. **要件のヒアリング** → 5W1Hを明確化
2. **PBIタイプの判定** → 8タイプから選択
3. **ユーザーストーリーの作成** → As a... I want... So that...
4. **受け入れ基準の定義** → Given-When-Then形式
5. **技術的制約の特定** → 使用技術、制約条件
6. **INVEST原則の検証** → 6つの基準をチェック
7. **見積もりの提案** → ストーリーポイント算出

### PBI品質スコアの算出

```python
def calculate_pbi_quality_score(pbi):
    """
    PBIの品質スコアを0-100で算出
    """
    score = 0
    
    # INVEST原則（各10点、合計60点）
    if is_independent(pbi): score += 10
    if is_negotiable(pbi): score += 10
    if is_valuable(pbi): score += 10
    if is_estimable(pbi): score += 10
    if is_small(pbi): score += 10
    if is_testable(pbi): score += 10
    
    # 追加要素（各10点、合計40点）
    if has_user_story(pbi): score += 10
    if has_acceptance_criteria(pbi): score += 10
    if has_technical_constraints(pbi): score += 10
    if has_clear_title(pbi): score += 10
    
    return score

# 評価基準
# 90-100: Excellent（優秀）
# 70-89: Good（良好）
# 50-69: Acceptable（許容範囲）
# 0-49: Needs Improvement（改善必要）
```

---

## 📚 参考資料

### 関連ドキュメント

- **[PBI-CREATION-BEST-PRACTICES.md](../core/PBI-CREATION-BEST-PRACTICES.md)** - 完全版（88 KB）
- **[PBI-TYPE-JUDGMENT-GUIDE.md](../core/PBI-TYPE-JUDGMENT-GUIDE.md)** - PBIタイプ判定（52 KB）
- **[PBI-SPLITTING-GUIDE.md](../guides/PBI-SPLITTING-GUIDE.md)** - PBI分割ガイド（25 KB）
- **[PBI-TEMPLATE-CATALOG.md](../templates-prompts/PBI-TEMPLATE-CATALOG.md)** - テンプレート集（20 KB）

### 完全版の追加コンテンツ

完全版には以下の詳細情報が含まれます：

- **PBIタイプ別の詳細ガイドライン** - 8タイプすべての詳細な作成方法
- **ユーザーストーリーの高度なテクニック** - ペルソナ、ジョブストーリー等
- **見積もりとポイント付けの詳細** - プランニングポーカー、相対見積もり
- **実例集（Good/Bad Examples）** - 各タイプの良い例・悪い例を20個以上掲載
- **AIエージェント向け詳細ガイダンス** - 自動化ワークフロー、品質検証ロジック

---

**最終更新日**: 2025-11-17  
**バージョン**: 1.0.0  
**完全版トークン数**: 約45,000トークン  
**Quick Refトークン数**: 約3,500トークン（92.2%削減）
