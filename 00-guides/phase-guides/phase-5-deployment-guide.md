---
title: "Phase 5 Deployment Guide"
version: "1.0.0"
created_date: "2025-11-05"
last_updated: "2025-11-05"
status: "Active"
phase: "Phase 5 - Deployment"
owner: "Engineering & DevOps Team"
document_type: "Lightweight Navigation Guide"
---

# Phase 5: デプロイメントガイド

> 品質保証から本番環境へ - 軽量ナビゲーションガイド

**対象**: Devin、Cursor、その他の自律型AIエージェント  
**前提**: Phase 4（レビュー・品質保証）が完了し、すべてのテストがパスしている  
**目的**: 安全かつ確実にアプリケーションを本番環境にデプロイする

---

## 📋 このガイドについて

### ドキュメントタイプ
- **軽量ナビゲーション型**: 既存ドキュメントへの参照を重視
- **所要時間**: 5-10分で読める
- **重複回避**: 詳細は既存ドキュメントを参照

### Phase 5 の位置づけ

```
Phase 3: 実装
    ↓
Phase 4: レビュー・品質保証
    ↓
┌─────────────────────────────────────────┐
│  Phase 5: デプロイメント ★ここ           │
│  - デプロイ前チェック                     │
│  - デプロイ実行                          │
│  - デプロイ後検証                        │
│  - リリースノート作成                     │
└─────────────────────────────────────────┘
    ↓
Phase 6: 運用・保守
```

### 開始条件

Phase 5は以下の条件を満たす場合に実施：
- ✅ **すべてのプロジェクト**: Phase 4が完了し、すべてのテストがパスしている
- ⚠️ **Hotfix**: **簡略版で実施** (30分-1時間)
  - 最小限のチェックとデプロイ
  - 迅速な対応が必要

---

## 🎯 Phase 5 の成果物

### 必須成果物
1. **デプロイチェックリスト**
   - デプロイ前確認項目
   - 完了状況

2. **デプロイ実行ログ**
   - デプロイ手順の記録
   - 実行時刻と結果

3. **デプロイ後検証レポート**
   - ヘルスチェック結果
   - スモークテスト結果
   - パフォーマンス確認

4. **リリースノート**
   - 変更内容のまとめ
   - 既知の問題

### 推奨成果物
5. **ロールバック手順書**（事前準備）
6. **デプロイ後モニタリングレポート**（24時間）

---

## 📊 Phase 5 の所要時間

| デプロイタイプ | 所要時間 | 含まれるタスク |
|---------------|---------|---------------|
| **初回デプロイ** | 2-3時間 | 全タスク、詳細な検証 |
| **通常デプロイ** | 1-1.5時間 | 全タスク |
| **Hotfix** | 30分-1時間 | 最小限のチェックとデプロイ |
| **ロールバック** | 15-30分 | 迅速な復旧 |

---

## 🔄 Phase 5 のワークフロー: 4ステップ

### **Step 5.1: デプロイ前チェック** (15-20分)

**実行内容**:
1. テスト結果の最終確認
2. 依存関係の確認
3. バックアップの確認
4. デプロイチェックリストの確認

**チェックリスト**:
- [ ] すべてのテストがパスしているか
- [ ] コードレビューが完了しているか
- [ ] デプロイ承認が得られているか
- [ ] データベースマイグレーションが準備できているか
- [ ] バックアップが取得されているか
- [ ] ロールバック手順が準備できているか
- [ ] デプロイ時間が適切か（メンテナンスウィンドウ等）
- [ ] 関係者に通知済みか

**🔴 必須参照**:
- [`03-development-process/release-management.md`](../../03-development-process/release-management.md)
  - **このドキュメントの記載内容に従ってリリース管理を実施**
  - **デプロイ承認プロセス、チェックリストを確認**
- [`03-development-process/change-management.md`](../../03-development-process/change-management.md)
  - **変更管理プロセスを確認**
  - **変更承認の手順を確認**

---

### **Step 5.2: デプロイ実行** (30-60分)

**実行内容**:
1. デプロイスクリプトの実行
2. 進捗のモニタリング
3. エラーハンドリング

**チェックリスト**:
- [ ] デプロイスクリプトを実行
- [ ] デプロイ進捗をモニタリング
- [ ] エラーが発生していないか確認
- [ ] データベースマイグレーションが成功したか
- [ ] アプリケーションが起動したか

**🔴 必須参照**:
- [`03-development-process/ci-cd-pipeline.md`](../../03-development-process/ci-cd-pipeline.md)
  - **このドキュメントの記載内容に従ってCI/CDパイプラインを実行**
  - **デプロイフローを確認**

**🟡 推奨参照**:
- [`05-technology-stack/infrastructure-stack.md`](../../05-technology-stack/infrastructure-stack.md)
  - **インフラ構成を確認**
- [`05-technology-stack/container-standards.md`](../../05-technology-stack/container-standards.md)
  - **コンテナデプロイの基準を確認**

**デプロイ戦略**:

**1. ブルー/グリーンデプロイメント**:
```
1. 新バージョン（グリーン）を別環境にデプロイ
2. グリーン環境でテスト
3. トラフィックをブルー→グリーンに切り替え
4. 問題があればブルーに戻す
```

**2. カナリアデプロイメント**:
```
1. 新バージョンを一部のユーザーにのみデプロイ
2. メトリクスを監視
3. 問題がなければ段階的にロールアウト
4. 問題があれば旧バージョンに戻す
```

**3. ローリングデプロイメント**:
```
1. インスタンスを1つずつ新バージョンに更新
2. 各インスタンス更新後にヘルスチェック
3. すべてのインスタンスを順次更新
```

**デプロイコマンド例（Kubernetes）**:
```bash
# デプロイ実行
kubectl apply -f deployment.yaml

# ステータス確認
kubectl rollout status deployment/app-deployment

# ロールバック（必要な場合）
kubectl rollout undo deployment/app-deployment
```

---

### **Step 5.3: デプロイ後検証** (20-30分)

**実行内容**:
1. ヘルスチェック
2. スモークテスト
3. ログ確認
4. パフォーマンス確認

**チェックリスト**:
- [ ] ヘルスチェックエンドポイントが正常に応答しているか
- [ ] 主要な機能が動作しているか（スモークテスト）
- [ ] エラーログが出力されていないか
- [ ] レスポンスタイムが正常範囲内か
- [ ] データベース接続が正常か
- [ ] 外部API連携が正常か

**🔴 必須参照**:
- [`03-development-process/release-management.md`](../../03-development-process/release-management.md)
  - **デプロイ後検証の手順を確認**

**🟡 推奨参照**:
- [`05-technology-stack/monitoring-logging.md`](../../05-technology-stack/monitoring-logging.md)
  - **モニタリング・ログの確認方法を参照**

**スモークテスト例**:
```bash
# ヘルスチェック
curl https://api.example.com/health

# 主要エンドポイントのテスト
curl https://api.example.com/api/users
curl https://api.example.com/api/products

# レスポンスタイム確認
time curl https://api.example.com/api/users
```

**ログ確認例**:
```bash
# アプリケーションログ確認
kubectl logs deployment/app-deployment --tail=100

# エラーログのフィルタ
kubectl logs deployment/app-deployment | grep ERROR
```

---

### **Step 5.4: リリースノート作成** (15-20分)

**実行内容**:
1. 変更内容のまとめ
2. リリースノートの作成と公開
3. ステークホルダーへの通知

**チェックリスト**:
- [ ] 新機能をリストアップ
- [ ] バグ修正をリストアップ
- [ ] 既知の問題をリストアップ
- [ ] 破壊的変更がある場合は明記
- [ ] マイグレーション手順を記載（該当する場合）
- [ ] リリースノートを公開
- [ ] ステークホルダーに通知

**🟡 推奨参照**:
- [`08-templates/`](../../08-templates/) のリリースノートテンプレート
  - **テンプレートを使用してリリースノートを作成**

**リリースノート構成例**:
```markdown
# Release v1.2.0 - 2025-11-05

## 新機能
- ユーザープロファイル編集機能を追加
- パスワードリセット機能を追加

## バグ修正
- ログイン時のセッションタイムアウト問題を修正
- 検索機能の文字化け問題を修正

## 改善
- API レスポンスタイムを30%改善
- データベースクエリを最適化

## 既知の問題
- 特定のブラウザで画像アップロードが遅い（次回リリースで対応予定）

## 破壊的変更
- なし

## アップグレード手順
1. データベースマイグレーションを実行: `npm run migrate`
2. アプリケーションを再起動
```

---

## 📚 フィーチャーフラグ管理（オプション）

段階的なロールアウトが必要な場合、フィーチャーフラグを活用します。

**🟡 推奨参照**:
- [`03-development-process/feature-flag-management.md`](../../03-development-process/feature-flag-management.md)
  - **フィーチャーフラグの管理方法を確認**

**フィーチャーフラグの利点**:
- 新機能を特定ユーザーにのみ公開
- 問題があれば即座に無効化
- A/Bテストの実施

---

## 📚 ロールバック手順（緊急時）

デプロイ後に重大な問題が発見された場合、迅速にロールバックします。

**ロールバックチェックリスト**:
- [ ] 問題の重大性を評価（ロールバックが必要か）
- [ ] ロールバックコマンドを実行
- [ ] ロールバック後の検証
- [ ] ステークホルダーに通知
- [ ] 根本原因の分析（Phase 6で実施）

**ロールバックコマンド例（Kubernetes）**:
```bash
# 直前のバージョンにロールバック
kubectl rollout undo deployment/app-deployment

# 特定のリビジョンにロールバック
kubectl rollout undo deployment/app-deployment --to-revision=3

# ステータス確認
kubectl rollout status deployment/app-deployment
```

---

## 📚 参照ドキュメント一覧

### コアドキュメント（Phase 5で頻繁に参照）

| ドキュメント | 優先度 | 用途 |
|------------|-------|------|
| `03-development-process/release-management.md` | 🔴 必須 | リリース管理 |
| `03-development-process/ci-cd-pipeline.md` | 🔴 必須 | CI/CDパイプライン |
| `03-development-process/change-management.md` | 🔴 必須 | 変更管理 |
| `05-technology-stack/infrastructure-stack.md` | 🟡 推奨 | インフラ構成 |
| `05-technology-stack/container-standards.md` | 🟡 推奨 | コンテナ標準 |
| `05-technology-stack/monitoring-logging.md` | 🟡 推奨 | モニタリング・ログ |
| `03-development-process/feature-flag-management.md` | 🟡 推奨 | フィーチャーフラグ |

---

## 🔍 実践的な活用方法

### 基本的なワークフロー

1. **デプロイ前チェックを徹底**
   - 必須: リリース管理、変更管理
   
2. **デプロイを実行**
   - 必須: CI/CDパイプライン
   - 推奨: インフラ構成、コンテナ標準
   
3. **デプロイ後検証を実施**
   - 必須: リリース管理
   - 推奨: モニタリング・ログ
   
4. **リリースノートを作成**
   - 推奨: テンプレート使用

### デプロイタイプ別のアプローチ

**初回デプロイ**:
- **全ステップを詳細に実施** (2-3時間)
- インフラ設定の確認を重視
- 詳細なモニタリング

**通常デプロイ**:
- **全ステップを実施** (1-1.5時間)
- 標準的なチェックとモニタリング

**Hotfix**:
- **最小限のチェックで迅速にデプロイ** (30分-1時間)
- デプロイ後の監視を強化

**ロールバック**:
- **迅速な復旧を最優先** (15-30分)
- 根本原因分析は後で実施

---

## ⚠️ 重要な原則

### ドキュメント参照の原則
- **参照ドキュメントの記載内容が最優先**
- 本ガイドは参照先への案内役
- 疑問点は該当ドキュメントを直接確認

### デプロイの原則
- **テストがパスしていることが前提**: Phase 4を必ず完了させる
- **バックアップを取得**: 万が一に備える
- **段階的なロールアウト**: 可能な限りカナリアやブルー/グリーンを使用
- **モニタリングを強化**: デプロイ後24時間は特に注意
- **ロールバック準備**: 問題があれば迅速に戻せるようにする

### 完了基準
Phase 5は以下を満たしたら完了：
- ✅ デプロイが成功している
- ✅ ヘルスチェックがパスしている
- ✅ スモークテストがパスしている
- ✅ ログにエラーが出力されていない
- ✅ パフォーマンスが正常範囲内
- ✅ リリースノートが公開されている

**次のフェーズへ**: Phase 6（運用・保守）に移行し、継続的なモニタリングを実施

---

## 🔄 ガイドの更新

- **最終更新日**: 2025-11-05
- **バージョン**: 1.0.0（軽量ナビゲーション型）
- **対象**: devin-organization-standards 全カテゴリ

---

## まとめ

Phase 5は**安全かつ確実にデプロイする重要なフェーズ**です。

- **目的**: アプリケーションを本番環境に安全にデプロイする
- **成果物**: デプロイチェックリスト、デプロイ実行ログ、検証レポート、リリースノート
- **所要時間**: 初回デプロイで2-3時間、通常デプロイで1-1.5時間、Hotfixで30分-1時間

**最も重要な原則**: 
- テストがすべてパスしていることを確認してからデプロイしてください
- バックアップとロールバック手順を準備してください
- デプロイ後は必ず検証とモニタリングを実施してください
- 問題があれば迅速にロールバックしてください

疑問や矛盾がある場合は、より具体的で新しいドキュメントを優先してください。
