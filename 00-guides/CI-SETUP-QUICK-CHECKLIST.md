# CI Setup - クイックチェックリスト

**バージョン**: v2.1.0  
**最終更新**: 2025-11-13  
**対象Phase**: Phase 1, 3, 4

---

## 📌 このチェックリストについて

**最小限の時間で**CI設定の必須項目を確認するためのクイックチェックリストです。

### 使用タイミング

- **Phase 1完了前**: プロジェクト初期化時の最終確認（5-10分）
- **Phase 3実装中**: CI設定の基本動作確認（5分）
- **Phase 4レビュー時**: CI設定の妥当性確認（5分）

### ⚠️ 注意

このクイックチェックリストは**最小限の確認項目**のみです。
詳細な設定要件は以下を参照してください:

- [CI-SETUP-CHECKLIST.md](./CI-SETUP-CHECKLIST.md) - 共通チェックリスト
- [CI-SETUP-LANGUAGE-MATRIX.md](./CI-SETUP-LANGUAGE-MATRIX.md) - 言語別詳細

---

## ⚡ Phase 1: プロジェクト初期化時（5-10分）

### 1.1 CI設定ファイルの存在確認

- [ ] `.github/workflows/` または `.azure-pipelines/` ディレクトリが存在
- [ ] CIワークフローファイル（YAML）が存在
- [ ] ビルド設定ファイルが存在（pom.xml / package.json / requirements.txt等）

### 1.2 必須品質ゲートの設定確認

- [ ] **コードフォーマット**: フォーマッターが設定されている
- [ ] **静的解析**: リンターまたは静的解析ツールが設定されている
- [ ] **ユニットテスト**: テストフレームワークが設定されている
- [ ] **カバレッジ**: カバレッジ測定ツールが設定されている
- [ ] **カバレッジ閾値**: 80%以上に設定されている

### 1.3 CIワークフローの基本設定

- [ ] PRトリガーが設定されている（`pull_request`）
- [ ] 品質ゲートコマンドがCI実行ステップに含まれている
- [ ] 品質ゲート失敗時にCIが失敗する設定

---

## ⚡ Phase 3: 実装中の確認（5分）

### 3.1 ローカル実行確認

- [ ] 品質ゲートコマンドがローカルで実行可能
- [ ] フォーマットチェックが合格
- [ ] リントチェックが合格
- [ ] すべてのテストが合格
- [ ] カバレッジ閾値（80%）を満たしている

### 3.2 ビルド確認

- [ ] ローカルビルドが成功
- [ ] 成果物（JAR / バンドル / パッケージ）が生成される

---

## ⚡ Phase 4: レビュー時の確認（5分）

### 4.1 CI実行結果確認

- [ ] PRでCIワークフローが自動実行されている
- [ ] すべての品質ゲートが合格（✅ グリーン）
- [ ] カバレッジレポートが生成・表示されている

### 4.2 品質ゲート動作確認

- [ ] テスト失敗時にCIが失敗する
- [ ] カバレッジ不足時にCIが失敗する
- [ ] フォーマットエラー時にCIが失敗する

---

## 🚨 よくある確認漏れ

### ❌ カバレッジ測定はあるが閾値がない

**問題**: カバレッジを測定していても、閾値が設定されていないとCIが失敗しない

**確認方法**:
```bash
# Gradleの例
grep "violationRules" build.gradle

# Mavenの例
grep "<rule>" pom.xml
```

### ❌ ローカルでは動くがCIで実行されない

**問題**: CIワークフローに品質ゲートコマンドが含まれていない

**確認方法**:
```bash
# GitHub Actionsの例
grep "run:" .github/workflows/*.yml
```

### ❌ フォーマットチェックが警告のみ

**問題**: フォーマットエラーがあってもCIが合格してしまう

**確認方法**: 意図的にフォーマットを崩してPRを作成し、CIが失敗することを確認

---

## 📊 完了基準

### ✅ Phase 1完了の条件

- すべてのチェック項目が☑️
- ローカルで品質ゲートコマンドが実行可能
- CIワークフローファイルがリポジトリにコミット済み

### ✅ Phase 3完了の条件

- ローカルですべての品質ゲートが合格
- ビルドが成功
- カバレッジ80%以上

### ✅ Phase 4レビュー開始の条件

- PRでCIが自動実行
- すべての品質ゲートが合格（グリーン）

---

## 🔧 トラブルシューティング

### Q: カバレッジ閾値が見つからない

**A**: 言語別の設定方法を [CI-SETUP-LANGUAGE-MATRIX.md](./CI-SETUP-LANGUAGE-MATRIX.md) で確認

### Q: CIワークフローが実行されない

**A**: 
1. `.github/workflows/` にYAMLファイルが存在するか確認
2. YAMLファイルに `pull_request:` トリガーがあるか確認
3. ブランチ保護ルールでCIが必須になっているか確認

### Q: ローカルで品質ゲートが失敗する

**A**: エラーメッセージを確認し、以下を実施:
1. フォーマットエラー → フォーマッターを実行して修正
2. テスト失敗 → テストを修正または追加
3. カバレッジ不足 → テストケースを追加

---

## 📚 関連ドキュメント

- [CI-SETUP-CHECKLIST.md](./CI-SETUP-CHECKLIST.md) - CI設定の共通チェックリスト
- [CI-SETUP-LANGUAGE-MATRIX.md](./CI-SETUP-LANGUAGE-MATRIX.md) - 言語別詳細設定マトリクス
- [AI-MASTER-WORKFLOW-GUIDE.md](./AI-MASTER-WORKFLOW-GUIDE.md) - 開発プロセス全体ガイド

---

## 変更履歴

- **2025-11-13**: クイックチェックリストを独立ドキュメント化
