# データベース設計書（Phase 2A 軽量版）

## ⚠️ Phase 2A 軽量版について

このテンプレートは**Phase 2A（実装前）**用の軽量版です。  
- **目的**: データモデルの妥当性確認、主要エンティティの特定
- **記載レベル**: 主要エンティティとリレーションのみ
- **省略項目**: 全カラム詳細、インデックス、制約、パフォーマンス設定

Phase 3（実装）完了後、**Phase 2Bで完全版に更新**してください。

---

## 📋 ドキュメント情報

| 項目 | 内容 |
|------|------|
| プロジェクト名 | [プロジェクト名] |
| システム名 | [システム名] |
| 作成日 | YYYY-MM-DD |
| 作成者 | [作成者名] |
| Phase | 2.1（軽量版・実装前） |
| バージョン | 0.1（軽量版） |

---

## 1. データベース概要

### 1.1 使用するデータベース

| 項目 | 内容 |
|------|------|
| DBMS | [例: PostgreSQL / MySQL / MongoDB] |
| 用途 | [例: メインデータストア / キャッシュ] |

**軽量版のため省略**: 具体的なバージョン、詳細なDB設定

---

## 2. ER図（概要）

### 2.1 主要エンティティのリレーション

```
[簡易的なER図]

例:
┌─────────┐       ┌─────────┐
│  User   │───────│  Post   │
└─────────┘  1:N  └─────────┘
                        │
                        │ 1:N
                        │
                   ┌─────────┐
                   │ Comment │
                   └─────────┘
```

**軽量版のため省略**: 詳細なカーディナリティ、外部キー制約の詳細

---

## 3. 主要テーブル定義（概要）

### 3.1 [テーブル名1] テーブル（例: users）

**テーブル目的**: [簡潔な説明]

#### 主要カラム

| カラム名 | データ型 | 説明 |
|----------|----------|------|
| id | INTEGER | 主キー |
| email | VARCHAR | メールアドレス |
| name | VARCHAR | ユーザー名 |
| created_at | TIMESTAMP | 作成日時 |

**軽量版のため省略**: 全カラムの詳細、NOT NULL制約、デフォルト値、インデックス

---

### 3.2 [テーブル名2] テーブル（例: posts）

**テーブル目的**: [簡潔な説明]

#### 主要カラム

| カラム名 | データ型 | 説明 |
|----------|----------|------|
| id | INTEGER | 主キー |
| user_id | INTEGER | 作成者ID（外部キー） |
| title | VARCHAR | タイトル |
| content | TEXT | 本文 |
| created_at | TIMESTAMP | 作成日時 |

**軽量版のため省略**: 全カラムの詳細、インデックス、外部キー制約詳細

---

### 3.3 [テーブル名3] テーブル（例: comments）

**テーブル目的**: [簡潔な説明]

#### 主要カラム

| カラム名 | データ型 | 説明 |
|----------|----------|------|
| id | INTEGER | 主キー |
| post_id | INTEGER | 投稿ID（外部キー） |
| user_id | INTEGER | コメント投稿者ID（外部キー） |
| content | TEXT | コメント内容 |
| created_at | TIMESTAMP | 作成日時 |

**軽量版のため省略**: 全カラムの詳細、インデックス、外部キー制約詳細

---

## 4. リレーション定義（概要）

### 4.1 主要なリレーション

| テーブル1 | リレーション | テーブル2 | 説明 |
|-----------|--------------|-----------|------|
| users | 1:N | posts | 1ユーザーは複数の投稿を持つ |
| posts | 1:N | comments | 1投稿は複数のコメントを持つ |
| users | 1:N | comments | 1ユーザーは複数のコメントを投稿可能 |

**軽量版のため省略**: 詳細な外部キー制約、カスケード設定

---

## 5. データモデルの妥当性確認

### 5.1 正規化レベル

- [ ] 第1正規形（1NF）を満たしているか？
- [ ] 第2正規形（2NF）を満たしているか？
- [ ] 第3正規形（3NF）を満たしているか？

### 5.2 データモデルチェックリスト

- [ ] 主要エンティティが全て特定されているか？
- [ ] エンティティ間のリレーションは適切か？
- [ ] 主キーは適切に定義されているか？
- [ ] 外部キーによる参照整合性が保たれるか？
- [ ] 将来の拡張性を考慮しているか？

### 5.3 想定データ量（概算）

| テーブル名 | 初期データ量 | 1年後予想 |
|------------|--------------|-----------|
| users | [概算値] | [概算値] |
| posts | [概算値] | [概算値] |
| comments | [概算値] | [概算値] |

**軽量版のため省略**: 詳細なデータ増加率、パーティショニング戦略

---

## 6. Phase 2Bでの更新項目（メモ）

Phase 3（実装）完了後、以下の項目を完全版で追加：
- [ ] 全カラムの詳細定義（NOT NULL、DEFAULT値、CHECK制約）
- [ ] 全インデックス定義（PRIMARY KEY、UNIQUE、INDEX）
- [ ] 外部キー制約の詳細（CASCADE、SET NULL等）
- [ ] パフォーマンスチューニング設定（パーティション、クラスタリング）
- [ ] 実際のデータ量とクエリパフォーマンス
- [ ] マイグレーション履歴

---

## 📝 作成ガイド

### このテンプレートの記入方法

1. **ER図**: 主要エンティティとリレーションのみ図示
2. **テーブル定義**: 主要カラムのみ記載（全カラムは不要）
3. **データ型**: 基本的なデータ型のみ（サイズ詳細は不要）
4. **制約**: 主キー・外部キーのみ（詳細な制約は不要）

### 記載時間の目安
- **Phase 2A（軽量版）**: 2〜3時間
- **Phase 2B（完全版への更新）**: 4〜6時間

---

## 🔄 更新履歴

| バージョン | Phase | 日付 | 変更内容 | 変更者 |
|------------|-------|------|----------|--------|
| 0.1 | 2.1（軽量版） | YYYY-MM-DD | 初版作成（軽量版） | [作成者名] |
| 1.0 | 2.2（完全版） | YYYY-MM-DD | 実装結果を反映し完全版に更新 | [作成者名] |

---

**Phase**: 2.1（軽量版・実装前）  
**次のステップ**: Phase 3（実装）へ  
**Phase 2Bでの更新**: 実装完了後、完全版に更新
