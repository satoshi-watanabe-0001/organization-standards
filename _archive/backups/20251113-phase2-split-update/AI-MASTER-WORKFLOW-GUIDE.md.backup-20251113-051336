---
title: "AI Master Workflow Guide"
version: "1.0.0"
created_date: "2025-11-05"
last_updated: "2025-11-05"
status: "Active"
owner: "Engineering Leadership Team"
---

# AI Master Workflow Guide - 統合ワークフローガイド

> PBIから始まる自律型AI開発の完全なワークフロー - 全フェーズ統合版

**対象**: Devin、Cursor、その他の自律型AIエージェント  
**目的**: JIRAのPBIを起点とした、要件分析から運用保守までの一貫した開発プロセスの提供

---

## 📋 このガイドについて

### 本ガイドの位置づけ

```
[本ガイド: AI-MASTER-WORKFLOW-GUIDE.md]
    ↓ 統合ワークフロー・司令塔
    ├─→ AI-DOCUMENT-NAVIGATOR.md (ドキュメント選択)
    ├─→ AI-DECISION-FRAMEWORK.md (意思決定支援)
    ├─→ phase-guides/ (各フェーズの詳細)
    └─→ 01-10/ (組織標準ドキュメント)
```

### 既存ガイドとの関係

- **AI-WORKFLOWS.md**: 本ガイドに統合・拡張されました
- **AI-USAGE-GUIDE.md**: 引き続き全体ナビゲーションとして使用
- **implementation-phase-document-reference-guide.md**: Phase 3で参照

### 本ガイドの特徴

✅ **PBIベース**: JIRAのProduct Backlog Itemから開始  
✅ **全フェーズカバー**: Phase 0-6 の完全なワークフロー  
✅ **柔軟なフロー**: 状況に応じてフェーズをスキップ可能 ⭐  
✅ **情報継承**: 各フェーズの入力・出力を明確化  
✅ **判断支援**: 各ステップでの意思決定ポイントを明示  
✅ **実践的**: 具体的な手順とチェックリスト

---

## 🎯 フェーズ実行の判断ガイド ⭐重要

### 基本原則

**全てのPBIで全フェーズを実行する必要はありません。**

PBIの種類・対象プロジェクトの状態に応じて、適切なフェーズから開始し、不要なフェーズはスキップしてください。

### PBIタイプ別の推奨フロー

#### タイプ1: 新規プロジェクト立ち上げ
**特徴**: ゼロからプロジェクトを開始
```
推奨フロー: Phase 0 → 1 → 2 → 3 → 4 → 5 → 6 (全フェーズ実施)

理由: 
- プロジェクト構造がない
- 技術スタック未選定
- アーキテクチャ未定義
```

#### タイプ2: 既存プロジェクトへの新機能追加
**特徴**: 既に動いているプロジェクトに機能を追加
```
推奨フロー: Phase 0 → 2 → 3 → 4 → 5 (Phase 1 スキップ)
              ↑
              Phase 1 はスキップ可能

理由:
- プロジェクト構造は既存
- 技術スタックは決定済み
- 設計と実装から開始できる

Phase 0 で確認:
- 既存プロジェクト情報の収集
- 既存アーキテクチャへの適合性確認
```

#### タイプ3: バグ修正
**特徴**: 既存機能の不具合修正
```
推奨フロー: (Phase 0) → Phase 3 → 4 (Phase 0,1,2,5,6 スキップ)
                ↑
            簡易版でOK

理由:
- 既存コードの修正のみ
- 設計変更なし
- 既存テストの更新

Phase 0 簡易版:
- バグの理解と再現手順の確認
- 影響範囲の特定
- 修正方針の決定
```

#### タイプ4: リファクタリング
**特徴**: 機能は変えず、コード品質の改善
```
推奨フロー: Phase 0 → 3 → 4 (Phase 1,2,5,6 スキップ)

理由:
- プロジェクト構造は既存
- 設計は変更なし（構造改善のみ）
- 実装とテストが主

Phase 0 で確認:
- リファクタリング対象の特定
- 改善方針の決定
```

#### タイプ5: 設計変更・アーキテクチャ改善
**特徴**: 既存システムの設計を見直す
```
推奨フロー: Phase 0 → 2 → 3 → 4 → 5 (Phase 1,6 スキップ)

理由:
- プロジェクト構造は既存
- 設計の見直しが必要
- 実装・デプロイまで実施
```

#### タイプ6: 緊急修正 (Hotfix)
**特徴**: 本番障害の緊急対応
```
推奨フロー: 簡易Phase 0 → Phase 3 → 簡易Phase 4 → Phase 5
            (最小限のフローで迅速対応)

理由:
- 時間制約が厳しい
- 最小限の確認で進める
- 後でドキュメント補完

注意:
- 緊急対応後、必ず Phase 4 (詳細レビュー) を実施
- Phase 6 で根本原因分析と再発防止
```

#### タイプ7: 実験的機能 (Spike/POC)
**特徴**: 技術検証や概念実証
```
推奨フロー: 簡易Phase 0 → Phase 3 (Phase 1,2,4,5,6 スキップ)

理由:
- 正式な実装ではない
- 動作確認が目的
- 品質基準は緩い

注意:
- 正式採用する場合は改めて全フェーズ実施
```

### フェーズスキップの判断フローチャート

```
PBI受領
  ↓
[Q1] 新規プロジェクトか?
  Yes → 全フェーズ実施 (0→1→2→3→4→5→6)
  No  → Q2へ
  ↓
[Q2] プロジェクト構造・技術スタックは確定済みか?
  Yes → Phase 1 スキップ
  No  → Phase 1 実施
  ↓
[Q3] 設計変更が必要か?
  Yes → Phase 2 実施
  No  → Phase 2 スキップ
  ↓
[Q4] コード変更が必要か?
  Yes → Phase 3 実施
  No  → Phase 3 スキップ (設計のみの場合)
  ↓
[Q5] デプロイが必要か?
  Yes → Phase 4 → 5 実施
  No  → Phase 5 スキップ
  ↓
実行するフェーズが確定
```

### 各フェーズのスキップ条件

| Phase | スキップ可能な条件 | スキップ時の注意点 |
|-------|------------------|------------------|
| **Phase 0** | ⚠️ 基本的にスキップ不可 | 簡易版での実施は可能 |
| **Phase 1** | プロジェクト構造・技術スタックが既存 | 既存構造の確認は必須 |
| **Phase 2** | 設計変更が不要（既存設計に従う） | 既存設計書の参照は必須 |
| **Phase 3** | コード変更が不要 | ドキュメントのみの場合 |
| **Phase 4** | ⚠️ 基本的にスキップ不可 | 簡易レビューでも必須 |
| **Phase 5** | デプロイ不要（開発環境のみ） | 後でデプロイ時に実施 |
| **Phase 6** | 新規機能で運用実績なし | 運用開始後に実施 |

### 最小限必要なフェーズ

**どんなPBIでも最低限必要**:
- **Phase 0 (要件分析)**: 簡易版でもOKだが、何かしらの要件確認は必須
- **Phase 3 (実装)**: コード変更がある場合は必須
- **Phase 4 (レビュー)**: 簡易版でもOKだが、品質確認は必須

**原則**: 「スキップ」は「不要」を意味し、「手抜き」を意味しません。

### フェーズスキップ時の記録

```markdown
## フェーズ実行記録: [PBI-KEY]

### 実行したフェーズ
- ✅ Phase 0: 要件分析 (実施)
- ⏭️ Phase 1: プロジェクト初期化 (スキップ - 既存プロジェクト)
- ✅ Phase 2: 設計 (実施)
- ✅ Phase 3: 実装 (実施)
- ✅ Phase 4: レビュー (実施)
- ✅ Phase 5: デプロイ (実施)
- ⏭️ Phase 6: 運用・保守 (後日実施)

### スキップ理由
- Phase 1: 既存プロジェクト「PaymentService」への機能追加のため、プロジェクト構造は既存
- Phase 6: 新機能のため運用実績なし。1週間後に運用レビュー実施予定

### 参照した既存資料
- プロジェクト構造: `PaymentService/README.md`
- 既存アーキテクチャ: `docs/architecture.md`
- 技術スタック: `docs/tech-stack.md`
```

---

## 🔄 開発ライフサイクル全体像

```
┌─────────────────────────────────────────────────────────┐
│  Phase 0: 要件分析・企画 ★新規                           │
│  ├─ PBI読み込み・理解                                     │
│  ├─ 要件抽出・整理                                        │
│  ├─ タスク細分化                                          │
│  └─ 初期技術方針決定                                       │
├─────────────────────────────────────────────────────────┤
│  Phase 1: プロジェクト初期化                               │
│  ├─ 技術スタック選定                                       │
│  ├─ プロジェクト構造作成                                   │
│  ├─ 開発環境セットアップ                                   │
│  └─ 初期ドキュメント作成                                   │
├─────────────────────────────────────────────────────────┤
│  Phase 2: 設計                                           │
│  ├─ システムアーキテクチャ設計                              │
│  ├─ API設計                                              │
│  ├─ データモデル設計                                       │
│  └─ セキュリティ設計                                       │
├─────────────────────────────────────────────────────────┤
│  Phase 3: 実装                                           │
│  ├─ 機能実装                                              │
│  ├─ ユニットテスト作成                                     │
│  ├─ 統合テスト作成                                        │
│  └─ コードドキュメント作成                                  │
├─────────────────────────────────────────────────────────┤
│  Phase 4: レビュー・品質保証                               │
│  ├─ コードレビュー                                         │
│  ├─ 静的解析                                              │
│  ├─ セキュリティスキャン                                   │
│  └─ 品質メトリクス確認                                     │
├─────────────────────────────────────────────────────────┤
│  Phase 5: デプロイメント                                   │
│  ├─ デプロイ設定作成                                       │
│  ├─ CI/CDパイプライン構築                                  │
│  ├─ 本番デプロイ                                           │
│  └─ 監視・ログ設定                                         │
├─────────────────────────────────────────────────────────┤
│  Phase 6: 運用・保守                                       │
│  ├─ モニタリング                                           │
│  ├─ インシデント対応                                       │
│  ├─ パフォーマンス最適化                                   │
│  └─ 継続的改善                                            │
└─────────────────────────────────────────────────────────┘

[フィードバックループ] ←─────────────────┘
```

### フェーズ間の情報フロー

```
PBI (JIRA)
  ↓
[Phase 0] → 要件分析書 + タスクリスト
  ↓
[Phase 1] → プロジェクト構造 + 技術選定書
  ↓
[Phase 2] → 設計書 + API仕様
  ↓
[Phase 3] → ソースコード + テストコード
  ↓
[Phase 4] → レビュー結果 + 品質レポート
  ↓
[Phase 5] → デプロイ設定 + 本番環境
  ↓
[Phase 6] → 運用ログ + 改善提案
  ↓
継続的フィードバック → [Phase 0へ]
```

---

## 📦 Phase 0: 要件分析・企画 ★新規定義

### Phase 概要

**目的**: PBIから開発可能なタスクへの変換  
**入力**: JIRA PBI (Product Backlog Item)  
**出力**: 
- 要件分析書 (Markdown)
- タスク分解リスト (Markdown/JSON)
- 初期技術方針メモ
**所要時間**: 30分〜2時間 (PBI複雑度による)

### 参照ドキュメント

| 優先度 | カテゴリ | ドキュメント | 参照タイミング |
|--------|---------|-------------|--------------|
| 🟡推奨 | 08-templates | project-proposal-template.md | プロジェクト提案が必要な場合 |
| ⚪参考 | 09-reference | glossary.md | 技術用語の確認 |
| ⚪参考 | 10-governance | technology-radar.md | 技術選定の初期判断 |

---

### Step 0.1: PBI読み込みと構造理解 (5-10分)

#### PBIの標準的な構造

```json
{
  "key": "PROJ-123",
  "title": "ユーザー認証機能の実装",
  "type": "Story/Feature/Task",
  "description": "詳細な説明...",
  "acceptance_criteria": [
    "基準1: ...",
    "基準2: ..."
  ],
  "technical_constraints": [
    "制約1: ...",
    "制約2: ..."
  ],
  "priority": "High/Medium/Low",
  "story_points": 8,
  "labels": ["authentication", "security"],
  "components": ["backend", "frontend"],
  "linked_issues": ["PROJ-122", "PROJ-124"]
}
```

#### 実行すべきアクション

1. **PBI全体を読み込む**
   ```
   # 読み込むべき情報
   - タイトル: 何を実装するか
   - 説明: なぜ必要か、背景情報
   - 受入基準: 完成の定義
   - 技術的制約: 使用技術、避けるべきもの
   - 優先度: 緊急度
   - ストーリーポイント: 複雑度の目安
   - 関連Issue: 依存関係
   ```

2. **初回読解チェックリスト**
   - [ ] PBIのタイトルを理解した
   - [ ] 背景・目的を理解した
   - [ ] 受入基準が明確になっている
   - [ ] 技術的制約を把握した
   - [ ] 関連IssueとFの依存関係を確認した

---

### Step 0.2: 情報抽出と不明点の特定 (10-15分)

#### 情報抽出チェックリスト

```markdown
## 機能要件
- [ ] **何を実装するか**: 明確に記述されているか?
  - Yes → 要件リストに追加
  - No → 不明点リストに追加

- [ ] **誰のための機能か**: ターゲットユーザーは明確か?
  - Yes → ユーザーストーリーとして整理
  - No → 不明点リストに追加

- [ ] **どのように動作するか**: 動作フローが明確か?
  - Yes → フロー図作成の準備
  - No → 不明点リストに追加

## 非機能要件
- [ ] **パフォーマンス要件**: レスポンスタイム、スループット等
  - 記載あり → 要件に追加
  - 記載なし → デフォルト基準を適用 or 確認

- [ ] **セキュリティ要件**: 認証、認可、データ保護等
  - 記載あり → セキュリティ設計に反映
  - 記載なし → 標準セキュリティ要件を適用

- [ ] **スケーラビリティ**: 予想負荷、成長予測
  - 記載あり → アーキテクチャ設計に反映
  - 記載なし → 標準的な設計を適用

## 技術的制約
- [ ] **使用すべき技術**: 指定されている技術スタック
  - 記載あり → 技術選定に反映
  - 記載なし → Phase 1で選定

- [ ] **避けるべき技術**: 使用禁止の技術
  - 記載あり → 技術選定時に考慮
  - 記載なし → 組織標準に従う

- [ ] **既存システムとの連携**: API、データベース等
  - 記載あり → 設計に反映
  - 記載なし → 新規独立システムとして扱う

## リソース制約
- [ ] **期限**: デッドライン
  - 記載あり → スケジュールに反映
  - 記載なし → ストーリーポイントから見積もり

- [ ] **予算**: コスト制約
  - 記載あり → 技術選定に反映
  - 記載なし → 標準的なコスト想定

- [ ] **チーム構成**: 担当者、スキル
  - 記載あり → タスク割り当てに考慮
  - 記載なし → AIが全て担当と想定
```

#### 不明点の処理フロー

```
不明点を発見
  ↓
[判断] 開発に影響するか?
  ├─ Yes (重要) → 即座に人間に確認要求
  │   └─ 確認テンプレート使用
  └─ No (軽微) → 不明点リストに記録
      └─ 後で確認 or 標準的な想定で進行
```

#### 人間への確認要求テンプレート

```markdown
## 不明点確認リクエスト

**PBI**: [PROJ-123] ユーザー認証機能の実装

### 不明点リスト

1. **パスワードリセット機能の要否**
   - 現状: 受入基準に明記なし
   - 質問: パスワードリセット機能を含めるべきですか?
   - 影響: 実装工数が+2日程度増加
   - 緊急度: 高 (設計に影響)

2. **多要素認証(MFA)の対応**
   - 現状: セキュリティ要件に明記なし
   - 質問: MFAは必要ですか? (SMS/TOTP等)
   - 影響: 実装工数が+3日程度増加
   - 緊急度: 高 (アーキテクチャに影響)

### 想定回答を待つ項目
[人間の回答を待機]

### 想定で進められる項目
- OAuth 2.0 / JWT を使用 (標準的な認証方式)
- PostgreSQLでユーザー情報管理 (技術スタック標準)
```

---

### Step 0.3: タスク細分化 (20-40分)

#### タスク細分化の原則

**原則1: トップダウン分解**
```
PBI (エピック)
  ↓ 分解
フィーチャー (機能単位)
  ↓ 分解
タスク (実装単位)
  ↓ 分解
サブタスク (細かい作業単位)
```

**原則2: 粒度の基準**

| レベル | 名称 | 所要時間 | 担当範囲 | 例 |
|--------|------|----------|----------|-----|
| **0** | エピック | 複数日〜週 | 複数人 or AI全体 | ユーザー認証機能全体 |
| **1** | フィーチャー | 1日〜数日 | 1人 or AI部分 | JWT認証実装 |
| **2** | タスク | 数時間〜1日 | 1人の作業 | AuthService実装 |
| **3** | サブタスク | 30分〜数時間 | 1つの実装 | generateToken()関数 |
| **4** | マイクロタスク | 数分〜30分 | 小さなロジック | トークン有効期限チェック |

**原則3: MECE (Mutually Exclusive, Collectively Exhaustive)**
- 漏れなく (Collectively Exhaustive): 全ての要件をカバー
- 重複なく (Mutually Exclusive): タスクが重複しない

#### 実践: タスク分解プロセス

**例: "ユーザー認証機能の実装" PBI**

```markdown
## レベル0: エピック
**PROJ-123**: ユーザー認証機能の実装

### レベル1: フィーチャー分解

#### F1: ユーザー登録機能
- 所要時間: 1-2日
- 優先度: High
- 依存関係: なし

#### F2: ログイン機能 (JWT認証)
- 所要時間: 1-2日
- 優先度: High
- 依存関係: F1完了後

#### F3: トークンリフレッシュ機能
- 所要時間: 0.5日
- 優先度: Medium
- 依存関係: F2完了後

#### F4: パスワードリセット機能
- 所要時間: 1日
- 優先度: Medium
- 依存関係: F1完了後
- 備考: 人間確認待ち (要否確認中)

### レベル2: タスク分解 (F2: ログイン機能の例)

#### T2.1: ログインAPIエンドポイント実装
- 所要時間: 4-6時間
- 担当レイヤー: Controller層
- 依存: F1のユーザーモデル

#### T2.2: 認証ロジック実装
- 所要時間: 3-4時間
- 担当レイヤー: Service層
- 依存: T2.1

#### T2.3: JWTトークン生成・検証
- 所要時間: 3-4時間
- 担当レイヤー: Service層
- 依存: T2.2

#### T2.4: 認証ミドルウェア実装
- 所要時間: 2-3時間
- 担当レイヤー: Middleware
- 依存: T2.3

#### T2.5: ユニットテスト作成
- 所要時間: 3-4時間
- 担当: テスト
- 依存: T2.1-T2.4全て

### レベル3: サブタスク分解 (T2.3の例)

#### ST2.3.1: JWT生成関数実装
- 所要時間: 1-1.5時間
- 実装内容: generateToken(userId, payload)

#### ST2.3.2: JWT検証関数実装
- 所要時間: 1-1.5時間
- 実装内容: verifyToken(token)

#### ST2.3.3: トークン有効期限管理
- 所要時間: 0.5-1時間
- 実装内容: 有効期限チェックロジック

#### ST2.3.4: シークレットキー管理
- 所要時間: 0.5時間
- 実装内容: 環境変数からの読み込み
```

#### タスク分解の出力フォーマット

**推奨フォーマット: Markdown Table**

```markdown
| ID | タスク名 | レベル | 所要時間 | 依存関係 | 優先度 | 担当レイヤー | ステータス |
|----|----------|--------|----------|----------|--------|-------------|-----------|
| F1 | ユーザー登録機能 | 1 | 1-2日 | なし | High | Full Stack | 未着手 |
| T1.1 | 登録APIエンドポイント | 2 | 4h | なし | High | Controller | 未着手 |
| T1.2 | ユーザーモデル実装 | 2 | 3h | T1.1 | High | Model | 未着手 |
| T1.3 | パスワードハッシュ化 | 2 | 2h | T1.2 | High | Service | 未着手 |
| ... | ... | ... | ... | ... | ... | ... | ... |
```

**代替フォーマット: JSON** (ツール連携用)

```json
{
  "pbi_key": "PROJ-123",
  "tasks": [
    {
      "id": "F1",
      "name": "ユーザー登録機能",
      "level": 1,
      "estimated_hours": "8-16",
      "dependencies": [],
      "priority": "High",
      "layer": "Full Stack",
      "status": "not_started"
    },
    {
      "id": "T1.1",
      "name": "登録APIエンドポイント",
      "level": 2,
      "estimated_hours": "4",
      "dependencies": [],
      "priority": "High",
      "layer": "Controller",
      "status": "not_started"
    }
  ]
}
```

---

### Step 0.4: 依存関係の特定と可視化 (10-15分)

#### 依存関係の種類

1. **技術的依存**: あるタスクの実装が別のタスクを必要とする
   - 例: ログイン機能 → ユーザーモデルが必要

2. **データ依存**: データ構造や定義に依存
   - 例: ユーザープロフィール → ユーザーテーブルが必要

3. **機能的依存**: 機能の論理的な順序
   - 例: パスワードリセット → メール送信機能が必要

4. **リソース依存**: 同じリソース(DB、API等)を使用
   - 例: 複数のエンドポイント → 同じデータベース

#### 依存関係マップの作成

```mermaid
graph TD
    F1[F1: ユーザー登録] --> F2[F2: ログイン機能]
    F1 --> F4[F4: パスワードリセット]
    F2 --> F3[F3: トークンリフレッシュ]
    
    F1 --> T1.1[T1.1: 登録API]
    F1 --> T1.2[T1.2: ユーザーモデル]
    T1.1 --> T1.3[T1.3: パスワードハッシュ化]
    T1.2 --> T1.3
```

#### クリティカルパスの特定

```
クリティカルパス: F1 → T1.2 → T1.3 → F2 → T2.3 → F3
最短完了時間: 5-7日
```

#### 並行実行可能タスクの特定

```markdown
## 並行実行グループ

### グループ1 (F1完了後)
- F2: ログイン機能
- F4: パスワードリセット機能
- 並行可能: データモデルは共通、処理は独立

### グループ2 (F2完了後)
- F3: トークンリフレッシュ
- T2.5: ログイン機能のテスト
- 並行可能: 独立した作業
```

---

### Step 0.5: 初期技術方針の決定 (10-15分)

#### 技術方針決定の原則

**原則1**: 組織標準を優先
- `05-technology-stack/` の承認済み技術から選択

**原則2**: PBIの制約を尊重
- 技術的制約が明記されている場合は従う

**原則3**: 不明な場合は Phase 1 で詳細決定
- この段階では概要レベルでOK

#### 決定すべき項目 (概要レベル)

```markdown
## 初期技術方針メモ

### プログラミング言語・フレームワーク
- **バックエンド**: [検討中 → Phase 1で決定]
  - 候補: Node.js/TypeScript, Python/FastAPI, Java/Spring
  - 根拠: [未決定]

- **フロントエンド**: [検討中 → Phase 1で決定]
  - 候補: React, Vue.js, Angular
  - 根拠: [未決定]

### データベース
- **種類**: RDBMS (リレーショナルデータベース)
  - 根拠: ユーザー情報は構造化データ、ACID特性が必要
- **具体的な製品**: [Phase 1で決定]
  - 候補: PostgreSQL, MySQL

### 認証方式
- **方式**: JWT (JSON Web Token)
  - 根拠: ステートレス、スケーラブル、API向け
- **詳細**: Phase 2で設計

### ホスティング・インフラ
- **環境**: クラウド (詳細は Phase 1)
  - 候補: AWS, GCP, Azure
- **根拠**: スケーラビリティ、可用性

### 備考
- この段階では方向性のみ決定
- 詳細な技術選定は Phase 1 で実施
- 組織標準 (05-technology-stack/) を参照
```

---

### Step 0.6: 要件分析書の作成 (15-20分)

#### テンプレートの使用

**参照**: `08-templates/requirements-analysis-template.md` (新規作成予定)

#### 要件分析書の構成

```markdown
---
title: "要件分析書: [PBI-KEY] [タイトル]"
pbi_key: "PROJ-123"
created_date: "2025-11-05"
analyst: "AI Agent"
status: "Draft/Confirmed"
---

# 要件分析書: [PROJ-123] ユーザー認証機能の実装

## 1. プロジェクト情報
- **PBI Key**: PROJ-123
- **PBIタイトル**: ユーザー認証機能の実装
- **優先度**: High
- **ストーリーポイント**: 8
- **作成日**: 2025-11-05
- **分析者**: AI Agent

## 2. 背景と目的
[PBIの背景・目的を記述]

## 3. 機能要件

### 3.1 ユーザー登録
- [詳細な要件]

### 3.2 ログイン機能
- [詳細な要件]

### 3.3 パスワードリセット
- [詳細な要件]
- **備考**: 要否確認中 (人間確認待ち)

## 4. 非機能要件

### 4.1 パフォーマンス
- ログインレスポンスタイム: < 500ms
- 同時ログイン: 1000ユーザー対応

### 4.2 セキュリティ
- パスワードハッシュ化: bcrypt使用
- JWT有効期限: 1時間
- リフレッシュトークン: 7日間

### 4.3 スケーラビリティ
- 水平スケーリング対応
- ステートレス設計

## 5. 受入基準
- [ ] 基準1: ユーザーはメールアドレスとパスワードで登録できる
- [ ] 基準2: ユーザーは登録情報でログインできる
- [ ] 基準3: JWTトークンが発行される
- [ ] 基準4: トークンでAPI認証ができる

## 6. 技術的制約
- JWT認証を使用すること
- PostgreSQLをデータベースとして使用 (組織標準)

## 7. タスク分解
[タスク分解リストへのリンク]
→ `task-breakdown-PROJ-123.md`

## 8. 初期技術方針
[Step 0.5で作成した技術方針メモ]

## 9. 依存関係
- **上流依存**: なし (新規機能)
- **下流依存**: PROJ-124 (ユーザープロフィール機能)

## 10. 未解決事項・確認待ち項目
- [ ] パスワードリセット機能の要否 (人間確認中)
- [ ] 多要素認証(MFA)の対応 (人間確認中)

## 11. リスク
- セキュリティリスク: パスワード管理の脆弱性
  - 対策: bcrypt使用、パスワードポリシー実装

## 12. 見積もり
- **総見積もり時間**: 5-7日
- **クリティカルパス**: F1 → F2 → F3

---
**次のステップ**: Phase 1 (プロジェクト初期化) へ
```

---

### Step 0.7: Phase 0 完了確認 (5分)

#### 完了チェックリスト

```markdown
## Phase 0 完了チェックリスト

### 必須項目
- [ ] PBIの全内容を読み込み、理解した
- [ ] 機能要件を抽出・整理した
- [ ] 非機能要件を抽出・整理した
- [ ] 受入基準を明確にした
- [ ] タスクを適切な粒度に分解した
- [ ] 依存関係を特定・可視化した
- [ ] 初期技術方針を決定した
- [ ] 要件分析書を作成した
- [ ] タスク分解リストを作成した

### 確認項目
- [ ] 不明点が全て解消された (または人間に確認済み)
- [ ] クリティカルパスを特定した
- [ ] 並行実行可能タスクを特定した
- [ ] リスクを特定・記録した

### 成果物確認
- [ ] requirements-analysis-[PBI-KEY].md が存在
- [ ] task-breakdown-[PBI-KEY].md が存在
- [ ] 必要に応じて確認リクエストを作成済み

### Phase 1 への準備
- [ ] Phase 1 で参照するドキュメントを確認
- [ ] Phase 1 の入力となる成果物を確認
```

#### Phase 0 → Phase 1 への引き継ぎ

```markdown
## Phase 1 への引き継ぎ事項

### 入力 (Phase 0 の成果物)
1. **要件分析書**: requirements-analysis-PROJ-123.md
2. **タスク分解リスト**: task-breakdown-PROJ-123.md
3. **初期技術方針メモ**: (要件分析書内)

### Phase 1 で実施すること
1. 技術スタックの詳細選定
2. プロジェクト構造の作成
3. 開発環境のセットアップ
4. Git設定
5. 初期ドキュメント作成

### Phase 1 で参照すべきドキュメント
- 🔴必須: 05-technology-stack/
- 🔴必須: 08-templates/
- 🟡推奨: 02-architecture-standards/
- 🟡推奨: 03-development-process/git-workflow.md
```

---

## ✅ Phase 0 完了と次フェーズの判断

### 次フェーズの判断フロー

Phase 0 が完了したら、**次に進むべきフェーズを判断**してください。

```
[Q1] 新規プロジェクトか?
  Yes → Phase 1 へ (プロジェクト初期化が必要)
  No  → Q2 へ

[Q2] プロジェクト構造・技術スタックは確定済みか?
  No  → Phase 1 へ (技術スタック選定が必要)
  Yes → Phase 2 へ (設計から開始)

[Q3] 設計変更が必要か?
  Yes → Phase 2 へ (設計フェーズが必要)
  No  → Phase 3 へ (実装から開始)

[Q4] コード変更が必要か?
  Yes → Phase 3 へ (実装フェーズが必要)
  No  → Phase 4 へ (レビューのみ、またはドキュメント作業)
```

### 典型的なフロー例

**新規プロジェクト**: Phase 0 → **1** → 2 → 3 → 4 → 5 → 6  
**既存プロジェクトへの機能追加**: Phase 0 → **2** → 3 → 4 → 5  
**バグ修正**: Phase 0 (簡易版) → **3** → 4  
**リファクタリング**: Phase 0 → **3** → 4  

📘 **次のガイド**: 
- 詳細: `phase-guides/phase-1-project-initialization-guide.md`
- 概要: 以下の Phase 1 セクションを参照

---

## 📦 Phase 1: プロジェクト初期化

### このフェーズの開始条件

✅ **実施すべき場合**:
- 新規プロジェクトの立ち上げ
- プロジェクト構造が未確定
- 技術スタックが未選定
- 開発環境が未セットアップ

⏭️ **スキップ可能な場合**:
- 既存プロジェクトへの機能追加・変更
- プロジェクト構造が既存で使用可能
- 技術スタックが決定済み
- 開発環境が整っている

**判断ポイント**: Phase 0で「プロジェクト構造・技術スタック確定済み」と判断された場合はスキップ

---

### Phase 概要

**目的**: 開発可能なプロジェクト構造の構築  
**入力**: 
- 要件分析書 (Phase 0)
- タスク分解リスト (Phase 0)
- 初期技術方針 (Phase 0)

**出力**:
- 確定した技術スタック選定書
- プロジェクトディレクトリ構造
- 初期化されたGitリポジトリ
- README.md
- 開発環境設定ファイル

**所要時間**: 2-4時間

### 参照ドキュメント

| 優先度 | カテゴリ | ドキュメント | 参照タイミング |
|--------|---------|-------------|--------------|
| 🔴必須 | 05-technology-stack | approved-technologies.md | 技術選定 |
| 🔴必須 | 05-technology-stack | frontend/backend/database-stack.md | 詳細技術選定 |
| 🔴必須 | 08-templates | project-templates/ | プロジェクト初期化 |
| 🟡推奨 | 02-architecture-standards | design-principles.md | アーキテクチャ方針 |
| 🟡推奨 | 03-development-process | git-workflow.md | Git設定 |
| 🟡推奨 | 06-tools-and-environment | ide-setup.md | 開発環境 |
| ⚪参考 | 10-governance | technology-radar.md | 技術評価 |

---

### Step 1.1: 技術スタック詳細選定 (30-60分)

**詳細は既存 AI-WORKFLOWS.md の Phase 1 を参照**

主要ステップ:
1. 承認済み技術の確認 (`05-technology-stack/approved-technologies.md`)
2. プロジェクトタイプに応じた技術選択
3. 評価マトリクスでのスコアリング
4. 技術選定書の作成

---

### Step 1.2: プロジェクト構造作成 (30-45分)

**詳細は既存 AI-WORKFLOWS.md の Phase 1 を参照**

---

### Step 1.3: Git設定 (10-15分)

**詳細は既存 AI-WORKFLOWS.md の Phase 1 を参照**

---

### Step 1.4: アーキテクチャ設計 (初期) (30-60分)

**詳細は既存 AI-WORKFLOWS.md の Phase 1 を参照**

---

### Step 1.5: 初期ドキュメント作成 (20-30分)

**詳細は既存 AI-WORKFLOWS.md の Phase 1 を参照**

---

### Phase 1 完了確認

**詳細チェックリストは ../09-reference/checklists/README.md を参照**

📘 **次のガイド**: Phase 2 (設計) へ

---

## 📐 Phase 2-6: 概要

Phase 2-6 の詳細ワークフローは以下のドキュメントを参照してください:

### Phase 2: 設計

#### このフェーズの開始条件

✅ **実施すべき場合**:
- 新規機能の設計が必要
- 既存アーキテクチャの変更が必要
- API仕様の新規作成・変更が必要
- データモデルの新規作成・変更が必要

⏭️ **スキップ可能な場合**:
- 既存設計に従った実装のみ (設計変更なし)
- バグ修正 (既存設計の範囲内)
- 小規模なリファクタリング (設計に影響なし)

**判断ポイント**: Phase 0で「設計変更不要」と判断された場合はスキップ

---

- **参照**: `phase-guides/phase-2-design-guide.md`
- **概要**: システムアーキテクチャ、API設計、データモデル設計
- **所要時間**: 1-2日

#### 📚 成果物作成時の参照ドキュメント

**重要**: Phase 2で設計書を作成する際は、以下のフォルダを必ず参照してください。

📂 **AI活用システム開発ドキュメント/03_基本設計/**
- 各設計書の詳細な作成ルール（6ファイル）
- 実際のサンプルファイル（5ファイル）
- 品質基準とチェックリスト

**作成手順**:
```
ステップ1: AI活用システム開発ドキュメント/README_成果物重要度定義.md で必須成果物を確認
    ↓
ステップ2: 03_基本設計/ 配下の該当する作成ルール.md を読む
    ↓
ステップ3: samples/ フォルダのサンプルを参照
    ↓
ステップ4: 実際のドキュメントを作成
    ↓
ステップ5: 品質基準に従ってチェック
```

**主要な作成ルールファイル**:
- `03_システム構成図作成ルール.md` - インフラ・アーキテクチャの全体像
- `03_アーキテクチャ設計書作成ルール.md` - 技術選定と設計方針
- `03_データベース設計書作成ルール.md` - データ構造の定義
- `03_画面設計書作成ルール.md` - UI/UXの設計
- `03_インターフェース設計書作成ルール.md` - API・外部連携の仕様
- `03_セキュリティ設計書作成ルール.md` - セキュリティ対策

### Phase 3: 実装

#### このフェーズの開始条件

✅ **実施すべき場合**:
- ソースコードの新規作成・変更が必要
- テストコードの作成・更新が必要
- 機能実装・バグ修正・リファクタリング

⏭️ **スキップ可能な場合**:
- コード変更が不要 (ドキュメント作成のみ)
- 設計レビューのみの場合
- 外部ツール設定のみの場合

**判断ポイント**: ほとんどの開発タスクで必須。コード変更がない場合のみスキップ

---

- **参照**: `implementation-phase-document-reference-guide.md`
- **概要**: コード実装、テスト作成
- **所要時間**: 数日〜数週間 (タスク規模による)

#### 📚 成果物作成時の参照ドキュメント

**重要**: Phase 3で実装を行う際は、以下のフォルダを参照してください。

📂 **AI活用システム開発ドキュメント/04_詳細設計/** と **05_実装/**
- 詳細設計書の作成ルール（6ファイル）
- コーディング規約とテスト作成ルール
- 実際のサンプルファイル（4ファイル）

**作成手順**:
```
ステップ1: AI活用システム開発ドキュメント/README_成果物重要度定義.md で必須成果物を確認
    ↓
ステップ2: 04_詳細設計/ 配下の作成ルール.md を読む
    ↓
ステップ3: samples/ フォルダのサンプルを参照
    ↓
ステップ4: 詳細設計書を作成
    ↓
ステップ5: 実装を開始
```

**主要な作成ルールファイル**:
- `04_詳細設計書作成ルール.md` - 実装の直接的な指針
- `04_クラス図作成ルール.md` - オブジェクト指向設計の構造
- `04_シーケンス図作成ルール.md` - 処理フローの可視化
- `04_物理DB設計書作成ルール.md` - インデックス・パーティション等の性能設計
- `04_単体テスト仕様書作成ルール.md` - コード品質保証

### Phase 4: レビュー・品質保証

#### このフェーズの開始条件

✅ **実施すべき場合**:
- 全ての開発タスク (基本的にスキップ不可)
- コード変更があった場合は必須
- 設計変更があった場合も必須

⏭️ **スキップ可能な場合**:
- ⚠️ 原則としてスキップ不可
- 緊急時 (Hotfix) のみ簡易版で実施し、後で詳細レビュー

**判断ポイント**: 品質確保のため、どんなタスクでも何らかのレビューは必須

---

- **参照**: `phase-guides/phase-4-review-qa-guide.md`
- **概要**: コードレビュー、静的解析、品質検証
- **所要時間**: 半日〜1日

#### 📚 成果物作成時の参照ドキュメント

**重要**: Phase 4でテスト仕様書・報告書を作成する際は、以下のフォルダを必ず参照してください。

📂 **AI活用システム開発ドキュメント/06_テスト/**
- 各テスト文書の詳細な作成ルール（7ファイル）
- 実際のサンプルファイル（6ファイル）
- 品質基準とチェックリスト

**作成手順**:
```
ステップ1: AI活用システム開発ドキュメント/README_成果物重要度定義.md で必須成果物を確認
    ↓
ステップ2: 06_テスト/ 配下の該当する作成ルール.md を読む
    ↓
ステップ3: samples/ フォルダのサンプルを参照
    ↓
ステップ4: テスト仕様書・報告書を作成
    ↓
ステップ5: 品質基準に従ってチェック
```

**主要な作成ルールファイル**:
- `06_結合テスト仕様書作成ルール.md` - モジュール間連携の検証
- `06_結合テスト報告書作成ルール.md` - 結合テスト結果の報告
- `06_システムテスト仕様書作成ルール.md` - E2E動作検証
- `06_システムテスト報告書作成ルール.md` - システムテスト結果の報告
- `06_性能テスト報告書作成ルール.md` - 非機能要件の検証
- `06_受入テスト仕様書作成ルール.md` - 顧客承認の基準
- `06_バグ管理表作成ルール.md` - 品質管理・トレーサビリティ

### Phase 5: デプロイメント

#### このフェーズの開始条件

✅ **実施すべき場合**:
- 本番環境へのデプロイが必要
- ステージング環境へのデプロイが必要
- CI/CDパイプラインの構築・更新が必要

⏭️ **スキップ可能な場合**:
- 開発環境のみの作業
- 設計ドキュメント作成のみ
- 実験的機能 (Spike/POC) で正式リリース不要
- 後日まとめてデプロイする予定

**判断ポイント**: デプロイが必要ないタスク、または後日実施予定の場合はスキップ

---

- **参照**: `phase-guides/phase-5-deployment-guide.md`
- **概要**: デプロイ設定、CI/CD構築、本番デプロイ
- **所要時間**: 半日〜1日

### Phase 6: 運用・保守

#### このフェーズの開始条件

✅ **実施すべき場合**:
- 本番環境で運用が開始された後
- モニタリング・アラート設定が必要
- インシデント対応・障害調査が必要
- パフォーマンス最適化が必要
- 運用実績に基づく改善が必要

⏭️ **スキップ可能な場合**:
- まだ本番リリースされていない
- 新規機能で運用実績がない
- 実験的機能で正式運用対象外

**判断ポイント**: 本番運用開始後に実施。新機能の場合は後日実施

---

- **参照**: `phase-guides/phase-6-operations-maintenance-guide.md`
- **概要**: モニタリング、インシデント対応、継続的改善
- **所要時間**: 継続的

#### 📚 成果物作成時の参照ドキュメント

**重要**: Phase 6で運用マニュアル等を作成する際は、以下のフォルダを参照してください。

📂 **AI活用システム開発ドキュメント/07_運用保守/**
- 運用マニュアルの作成ルール
- 障害対応マニュアルの作成ルール
- 保守計画書の作成ルール

**作成手順**:
```
ステップ1: AI活用システム開発ドキュメント/README_成果物重要度定義.md で必須成果物を確認
    ↓
ステップ2: 07_運用保守/ 配下の作成ルール.md を読む
    ↓
ステップ3: 実際のドキュメントを作成
```

**主要な成果物**:
- 運用マニュアル - 本番運用に必須
- 操作マニュアル - エンドユーザー向けに必須
- 障害対応マニュアル - トラブルシューティングに必須
- 保守計画書 - 長期運用で重要
- システム管理者マニュアル - 技術者向け保守ドキュメントとして重要

---

## 🔄 フェーズ横断的な考慮事項

### 情報の継承ルール

```
Phase N の完了基準:
1. 成果物が全て作成されている
2. 完了チェックリストが全て✓
3. Phase N+1 への引き継ぎ事項が明確

Phase N+1 の開始条件:
1. Phase N の成果物を受領
2. 受領した成果物の妥当性確認
3. Phase N+1 の参照ドキュメント確認
```

### トレーサビリティの確保

```
PBI: PROJ-123
  ↓ Phase 0
要件分析書: requirements-analysis-PROJ-123.md
  ↓ Phase 1
技術選定書: tech-stack-PROJ-123.md
  ↓ Phase 2
設計書: design-document-PROJ-123.md
  ↓ Phase 3
ソースコード: src/features/auth/
  ↓ Phase 4
レビューレポート: review-report-PROJ-123.md
  ↓ Phase 5
デプロイ記録: deployment-log-PROJ-123.md
  ↓ Phase 6
運用レポート: operations-report-PROJ-123.md
```

### 継続的な品質確認

各フェーズで以下を確認:
1. **前フェーズの成果物**: 入力として適切か
2. **本フェーズの作業**: 標準に準拠しているか
3. **次フェーズへの引き継ぎ**: 十分な情報があるか

---

## 🚨 エスカレーション基準

### 即座にエスカレーション (人間判断が必要)

以下の状況では、作業を中断して人間に確認:

- [ ] セキュリティに重大な影響がある決定
- [ ] 組織標準から大きく逸脱する必要がある
- [ ] 技術選定が組織方針と矛盾する
- [ ] 複数ドキュメント間で解決不能な矛盾がある（参照: `10-governance/standards-hierarchy-and-precedence.md`）
- [ ] 予算・スケジュールに重大な影響がある
- [ ] PBIの解釈に重大な不確実性がある

### 実装後レビュー要求

以下の場合は実装を進めるが、完了後に人間レビューを要求:

- [ ] 新しいアーキテクチャパターンを採用した
- [ ] パフォーマンス要件が特に厳しい
- [ ] 複雑なビジネスロジックを実装した
- [ ] 複数の技術を組み合わせた複雑な実装

---

## 📞 困ったときの参照先

### 状況別ガイド

| 状況 | 参照先 |
|------|--------|
| ドキュメントの選び方が分からない | AI-DOCUMENT-NAVIGATOR.md |
| 判断に迷っている | AI-DECISION-FRAMEWORK.md |
| 標準間の矛盾・優先度判断 | 10-governance/standards-hierarchy-and-precedence.md |
| 具体的なプロンプト例が欲しい | AI-PROMPTS.md |
| チェックリストが欲しい | ../09-reference/checklists/README.md |
| コーディング規約の詳細 | AI-CODING-INSTRUCTIONS.md |
| 数値基準を知りたい | AI-QUICK-REFERENCE.md |

### フェーズ別詳細ガイド

- Phase 0: (このドキュメント)
- Phase 1: AI-WORKFLOWS.md または phase-1-project-initialization-guide.md
- Phase 2: phase-2-design-guide.md
- Phase 3: implementation-phase-document-reference-guide.md
- Phase 4: phase-4-review-qa-guide.md
- Phase 5: phase-5-deployment-guide.md
- Phase 6: phase-6-operations-maintenance-guide.md

---

## 📊 このガイドの使い方

### 初めて使う場合
1. このドキュメント全体を一読
2. Phase 0 から順に実施
3. 不明点があれば「困ったときの参照先」を確認

### 特定フェーズから開始する場合
1. 該当フェーズのセクションを読む
2. 「入力」セクションで必要な前提を確認
3. 「参照ドキュメント」を確認しながら作業

### 継続的な改善
- このガイドは living document です
- 実際の使用でフィードバックを収集
- 定期的に更新・改善

---

**最終更新**: 2025-11-05  
**バージョン**: 1.0.0  
**次の更新予定**: 実使用フィードバック収集後

**関連ドキュメント**:
- [AI使用マニュアル](./DOCUMENT-USAGE-MANUAL.md) - このガイドの使い方
- [ドキュメントナビゲーター](./AI-DOCUMENT-NAVIGATOR.md) - ドキュメント選択支援
- [意思決定フレームワーク](./AI-DECISION-FRAMEWORK.md) - 判断支援
