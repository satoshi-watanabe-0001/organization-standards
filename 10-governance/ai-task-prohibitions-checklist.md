# AI タスク実行禁止事項チェックリスト

## 📋 概要

このチェックリストは、AIエージェントがタスクを実行する前に確認すべき禁止事項の簡易版です。
詳細は [ai-task-prohibitions.md](./ai-task-prohibitions.md) を参照してください。

---

## ✅ タスク開始前チェック

### 基本確認
- [ ] タスク内容に**明示的な指示**があるか確認した
- [ ] 指示がない項目については「触らない」原則を適用する
- [ ] 変更範囲が指示内容に限定されているか確認した

---

## 🚫 分野別禁止事項クイックチェック

### 1️⃣ コーディング・実装

#### 絶対禁止
- [ ] 本番環境の設定ファイル (`.env.production`, `production.yml`)
- [ ] 認証・認可の中核ロジック
- [ ] データベーススキーマの既存テーブル（マイグレーションなし）
- [ ] 暗号化・セキュリティライブラリ設定
- [ ] 他チーム管理コード領域
- [ ] ライセンスヘッダー・著作権表記

#### 変更禁止
- [ ] 既存APIシグネチャ変更（後方互換性破壊）
- [ ] グローバル設定（タイムゾーン、エンコーディング等）
- [ ] 依存関係のメジャーバージョンアップ（指示なし）
- [ ] エラーハンドリングの削除・簡略化
- [ ] ログ出力の削除
- [ ] トランザクション境界の変更

#### 標準違反
- [ ] コーディングスタンダード違反
- [ ] フォーマッター設定の上書き
- [ ] 命名規則の独自解釈

---

### 2️⃣ アーキテクチャ・設計

- [ ] 確立されたアーキテクチャパターンの破壊
- [ ] モジュール間依存関係の逆転
- [ ] 既存インターフェース定義の変更
- [ ] システム境界の再定義
- [ ] 新技術スタックの独断導入
- [ ] アーキテクチャパターンの混在
- [ ] ADRに反する決定

---

### 3️⃣ データベース・SQL

#### 絶対禁止
- [ ] 本番データへの直接アクセス・変更
- [ ] 既存テーブルのカラム削除（計画なし）
- [ ] 外部キー制約の削除
- [ ] インデックスの無断削除
- [ ] トリガー・ストアドプロシージャの削除
- [ ] データ型の互換性のない変更

#### 慎重操作
- [ ] データマイグレーションの直接実行（レビューなし）
- [ ] DELETE/TRUNCATEの実行（確認なし）
- [ ] 大規模テーブルへの変更

---

### 4️⃣ テスト実装

- [ ] 正常動作テストの削除
- [ ] テストカバレッジの低下
- [ ] 統合テストでの過度なモック化
- [ ] テストデータの本番混入
- [ ] テストのスキップ/無効化（理由なし）
- [ ] ハードコードスリープによる安定化
- [ ] 外部サービスへの実接続

---

### 5️⃣ ドキュメンテーション

#### 削除禁止
- [ ] テンプレート構造（08-templates配下）
- [ ] 既存ADRの改変
- [ ] ガイドラインの削除（00-guides配下）
- [ ] バージョン履歴・変更履歴

#### 記述禁止
- [ ] 機密情報（パスワード、APIキー、個人情報）
- [ ] 未確認情報の記述
- [ ] コードと矛盾する説明

---

### 6️⃣ CI/CD・デプロイメント

#### CI設定ファイル（指示がない限り触らない）
- [ ] `.github/workflows/*.yml` (GitHub Actions)
- [ ] `.gitlab-ci.yml` (GitLab CI)
- [ ] `Jenkinsfile` (Jenkins)
- [ ] `azure-pipelines.yml` (Azure Pipelines)
- [ ] `bitbucket-pipelines.yml` (Bitbucket)
- [ ] `.circleci/config.yml` (CircleCI)
- [ ] その他CI/CD設定ファイル

#### CI設定の部分的修正（指示なしでは全て禁止）
- [ ] トリガー条件の変更
- [ ] ブランチ指定の変更
- [ ] 環境変数の操作
- [ ] ジョブ設定の変更
- [ ] タイムアウト設定の変更
- [ ] 実行環境（ランナー/イメージ）の変更

#### CI関連ファイル（指示なしでは触らない）
- [ ] ビルドスクリプト (`build.sh`, `Makefile`)
- [ ] テスト実行スクリプト
- [ ] デプロイメントスクリプト
- [ ] Dockerファイル (`Dockerfile`, `docker-compose.yml`)
- [ ] CI用設定ファイル

#### パイプライン変更禁止
- [ ] 本番パイプラインの変更
- [ ] セキュリティスキャンの無効化・削除
- [ ] 承認プロセス・ゲートの削除
- [ ] 必須ステータスチェックの削除
- [ ] 通知設定の変更
- [ ] ロールバック手順の削除

#### 禁止される判断
- [ ] パフォーマンス理由でのテストスキップ
- [ ] 安全性を犠牲にした高速化
- [ ] CI/CD設定の実験的変更

---

### 7️⃣ セキュリティ・コンプライアンス

- [ ] セキュリティポリシーの緩和
- [ ] セキュリティヘッダーの削除
- [ ] CORS設定の全開放
- [ ] 入力バリデーションの削除
- [ ] SQLインジェクション対策の削除
- [ ] 認証・認可チェックのバイパス
- [ ] 弱い暗号化アルゴリズムの採用
- [ ] 既知の脆弱性の許容

---

### 8️⃣ バージョン管理・Git操作

- [ ] mainブランチへの直接プッシュ
- [ ] force pushによる履歴改変（共有ブランチ）
- [ ] コミットメッセージ規約無視
- [ ] 大容量バイナリファイルのコミット
- [ ] 他人のブランチへのrebase
- [ ] .gitignoreファイルの追跡
- [ ] マージコンフリクトの自動解決（レビューなし）

---

### 9️⃣ 設定管理

- [ ] 未承認ツールの導入
- [ ] チーム共有設定の個人カスタマイズ
- [ ] 環境変数名の変更

---

### 🔟 リファクタリング

- [ ] テストなしの大規模リファクタリング
- [ ] テストなしの内部ロジック変更
- [ ] 影響検証なしの最適化
- [ ] 外部公開APIの破壊的変更
- [ ] 承認されていないリファクタリング

---

### 1️⃣1️⃣ 緊急対応・ホットフィックス

- [ ] 根本原因調査なしの対症療法
- [ ] ポストモーテムの省略
- [ ] インシデント管理手順の無視
- [ ] 変更管理プロセスの完全スキップ

---

### 1️⃣2️⃣ 依存関係管理

- [ ] 非公式ソースからのパッケージ取得
- [ ] セキュリティ脆弱性があるバージョンの使用
- [ ] ライセンス確認なしのライブラリ追加
- [ ] ロックファイルの削除

---

## 🎯 全タスク共通禁止事項

### ファイル・ディレクトリ
- [ ] `_archive`フォルダ配下の参照・復元（指示なし）
- [ ] 標準ドキュメント構造の破壊
- [ ] バージョン管理外のファイル操作

### 作業プロセス
- [ ] 承認なしの破壊的変更
- [ ] エラーの隠蔽

### コミュニケーション
- [ ] 不確実な情報を確定情報として報告
- [ ] 実行していない作業の完了報告
- [ ] 警告・エラーの無視

---

## ✅ CI設定変更の特別チェック

### 明示的指示の確認

#### ✓ 十分な指示（変更可能）
```
✓ "GitHub Actionsの○○ワークフローに△△ステップを追加してください"
✓ "CI/CDパイプラインの□□を修正してください"
✓ ".github/workflows/deploy.ymlのNode.jsバージョンを18に更新してください"
```

#### ✗ 不十分な指示（変更不可）
```
✗ "テストを高速化してください"
✗ "ビルドエラーを修正してください"
✗ "コードを改善してください"
✗ "デプロイの準備をしてください"
```

### CI設定変更時の追加チェック（指示がある場合）

#### 変更前
- [ ] CI設定変更の明示的指示があるか確認
- [ ] 変更範囲が指示内容に限定されているか確認
- [ ] 変更による影響範囲を分析
- [ ] 他のブランチ・環境への影響を確認

#### 変更時
- [ ] 指示された箇所のみを変更
- [ ] 既存の重要ステップ（テスト、セキュリティ）を維持
- [ ] 変更理由をコミットメッセージに明記
- [ ] CI設定変更をPR説明に明記
- [ ] 関連ドキュメントを更新

#### 変更後
- [ ] CI/CDパイプラインがエラーなく実行
- [ ] すべての必須チェックがパス
- [ ] 実行時間の影響を測定・報告
- [ ] セキュリティチェックが正常動作
- [ ] 各環境での動作確認
- [ ] ロールバック可能性の確認

---

## 📊 判断フロー

```
タスク受領
    ↓
明示的な指示があるか？
    ↓
  No → 禁止事項に該当するか確認
        ↓
      該当する → ユーザーに確認 → 承認 → 実行
        ↓                     ↓
      該当しない             中止
        ↓
      実行
    ↓
  Yes → 指示内容の範囲確認
        ↓
      禁止事項に該当するか？
        ↓
      該当する → 指示範囲内か？
                  ↓
                範囲内 → 実行
                  ↓
                範囲外 → ユーザーに確認
        ↓
      該当しない → 実行
```

---

## 🔍 CI設定に関する判断例

### ケース1: テスト高速化の依頼
```
依頼: "テストを高速化してください"

判断:
- CI設定の明示的な変更指示なし
- コード最適化やテストロジックの改善は可能
- CI設定ファイル（.github/workflows/*.yml等）は触らない

対応:
✓ テストコードの最適化
✓ 不要なテストケースの特定と提案
✗ CI設定のキャッシュ設定変更
✗ CI設定のテスト並列度変更
```

### ケース2: CI設定の明示的変更依頼
```
依頼: "GitHub Actionsのtest.ymlでNode.jsバージョンを18に更新してください"

判断:
- CI設定変更の明示的な指示あり
- 変更範囲が明確（test.yml内のNode.jsバージョンのみ）

対応:
✓ .github/workflows/test.yml の Node.js バージョン更新
✓ 変更後の動作検証
✗ 他のワークフローファイルへの波及変更
✗ 関連しない設定の変更
```

### ケース3: ビルドエラー修正の依頼
```
依頼: "ビルドエラーを修正してください"

判断:
- CI設定の変更指示なし
- ビルドエラーはコード側の問題の可能性が高い

対応:
✓ エラーログの分析
✓ ソースコードの修正
✓ 依存関係の問題解決
✗ CI設定ファイルの変更
✗ ビルドスクリプトの変更（明示的指示がない限り）
```

---

## 📚 参照ドキュメント

- **詳細版**: [ai-task-prohibitions.md](./ai-task-prohibitions.md)
- **安全な変更領域**: [ai-safe-modification-zones.md](./ai-safe-modification-zones.md)
- **作業前チェック**: [../00-guides/AI-PRE-WORK-CHECKLIST.md](../00-guides/AI-PRE-WORK-CHECKLIST.md)
- **マスターワークフロー**: [../00-guides/AI-MASTER-WORKFLOW-GUIDE.md](../00-guides/AI-MASTER-WORKFLOW-GUIDE.md)

---

## 📝 使い方

### AIエージェント向け
1. タスク受領時にこのチェックリストを確認
2. 該当する禁止事項がないか確認
3. 不明な場合は詳細版ドキュメント参照
4. 禁止事項に該当する場合は確認を求める

### 人間レビュアー向け
1. AIの作業内容をレビュー時に参照
2. 禁止事項に抵触していないか確認
3. 問題がある場合は指摘とともにこのドキュメント参照

---

## 📝 更新履歴

| バージョン | 日付 | 変更内容 |
|---------|------|---------|
| 1.0.0 | 2025-11-10 | 初版作成（CI設定の詳細化を含む） |

---

*このチェックリストはタスク実行前の必須確認事項です。不明点がある場合は必ず確認を求めてください。*
