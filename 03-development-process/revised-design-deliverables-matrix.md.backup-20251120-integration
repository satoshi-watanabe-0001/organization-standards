---
version: "2.2.0"
last_updated: "2025-11-20"
status: "draft"
owner: "Engineering Team"
category: "design-phase"
change_type: "major - Phase 2をPhase 2A/2-Bに分割"
---

# 改訂版 設計フェーズ成果物マトリクス / Revised Design Phase Deliverables Matrix

## 📊 クイックリファレンス

このドキュメントは、改訂後の設計フェーズ (Phase 2A, Phase 5) で「いつ、何を、誰が作るか」を一目で確認できるマトリクスです。

---

## 🔄 変更概要

### 主要変更点

```yaml
変更前:
  phase_2:
    name: "設計 (Design)"
    timing: "実装前"
    deliverables: "全ての設計ドキュメント"

変更後:
  phase_2a:
    name: "実装前設計 (Pre-Implementation Design)"
    timing: "実装前 (1-2日)"
    deliverables: "最小限の設計 (ADR, API契約, 制約条件)"
  
  phase_5:
    name: "実装後設計 (Post-Implementation Design)"
    timing: "実装後または並行 (2-3日)"
    deliverables: "詳細な設計ドキュメント (設計書, API仕様書, 図)"
```

---

## 成果物マトリクス (Phase 2A vs Phase 5)

### 成果物の分類

| 成果物 | Phase 2A<br>実装前設計 | Phase 5<br>実装後設計 | 目的の違い |
|--------|:--------------------:|:--------------------:|-----------|
| **ADR** | ✓✓ (初版) | ✓ (更新版) | 2-A: 重要な決定<br>2-B: 実装中の追加決定 |
| **API契約書** | ✓✓ | - | 2-A: チーム間の契約合意 |
| **API仕様書** | - | ✓✓ | 2-B: 全エンドポイントの詳細 |
| **制約条件文書** | ✓✓ | - | 2-A: セキュリティ・パフォーマンス要件 |
| **設計書** | - | ✓✓ | 2-B: 実装ベースの実装後設計 |
| **アーキテクチャ図(概要)** | ✓ | - | 2-A: システム構成の概要 |
| **アーキテクチャ図(完全版)** | - | ✓✓ | 2-B: 全図を含む完全版 |
| **データモデル概要** | △ | - | 2-A: 主要エンティティのみ |
| **データモデル文書** | - | ✓✓ | 2-B: ER図、スキーマ定義、マイグレーション |
| **技術提案書** | △ | - | 2-A: 承認が必要な場合 |
| **設計レビュー記録** | - | ✓ | 2-B: レビュー結果の記録 |

**凡例**: 
- ✓✓ = 必須
- ✓ = 推奨
- △ = 条件付き
- \- = 対象外

---

## プロジェクト規模別マトリクス

### 小規模プロジェクト (~1ヶ月)

| 成果物 | Phase 2A | Phase 5 | 作成時間 |
|--------|:--------:|:--------:|---------|
| ADR | ✓ (1-2個) | △ | 1-2時間 |
| API契約書 | △ | - | 1-2時間 |
| 制約条件文書 | ✓ | - | 1時間 |
| 設計書 | - | ✓ (簡易版) | 4-6時間 |
| API仕様書 | - | △ | 2-4時間 |
| アーキテクチャ図 | △ | ✓ | 2-3時間 |
| データモデル文書 | - | △ | 2-3時間 |

**Phase 2A 合計**: 2-5時間 (半日~1日)
**Phase 5 合計**: 8-16時間 (1-2日)

---

### 中規模プロジェクト (1-3ヶ月)

| 成果物 | Phase 2A | Phase 5 | 作成時間 |
|--------|:--------:|:--------:|---------|
| ADR | ✓✓ (3-5個) | ✓ | 2-4時間 |
| API契約書 | ✓✓ | - | 2-4時間 |
| 制約条件文書 | ✓✓ | - | 1-2時間 |
| 技術提案書 | ✓ | - | 2-3時間 |
| アーキテクチャ概要図 | ✓ | - | 1-2時間 |
| 設計書 | - | ✓✓ | 8-12時間 |
| 完全版API仕様書 | - | ✓✓ | 4-6時間 |
| アーキテクチャ図(完全版) | - | ✓✓ | 4-5時間 |
| データモデル文書 | - | ✓✓ | 4-6時間 |
| 設計レビュー記録 | - | ✓ | 1-2時間 |

**Phase 2A 合計**: 8-15時間 (1-2日)
**Phase 5 合計**: 21-31時間 (3-4日、AI活用時 2-3日)

---

### 大規模プロジェクト (3ヶ月~)

| 成果物 | Phase 2A | Phase 5 | 作成時間 |
|--------|:--------:|:--------:|---------|
| ADR | ✓✓ (5-10個) | ✓ | 4-8時間 |
| API契約書 | ✓✓ | - | 4-6時間 |
| 制約条件文書 | ✓✓ | - | 2-3時間 |
| 技術提案書 | ✓✓ | - | 4-6時間 |
| アーキテクチャ概要図 | ✓✓ | - | 2-3時間 |
| 設計書 | - | ✓✓ | 12-16時間 |
| 完全版API仕様書 | - | ✓✓ | 6-10時間 |
| アーキテクチャ図(完全版) | - | ✓✓ | 6-8時間 |
| データモデル文書 | - | ✓✓ | 6-10時間 |
| 設計レビュー記録 | - | ✓✓ | 2-3時間 |
| セキュリティ評価書 | △ | ✓ | 4-6時間 |
| パフォーマンステスト計画 | △ | ✓ | 3-4時間 |

**Phase 2A 合計**: 16-26時間 (2-3日)
**Phase 5 合計**: 36-57時間 (5-7日、AI活用時 3-4日)

---

## プロジェクトタイプ別マトリクス

### 新規マイクロサービス開発

| フェーズ | 成果物 | 優先度 | 目的 |
|---------|--------|:------:|------|
| **Phase 2A** | ADR (技術スタック) | 高 | 技術決定の記録 |
| | API契約書 | 高 | 他サービスとの契約 |
| | 制約条件文書 | 高 | 非機能要件の明確化 |
| | アーキテクチャ概要図 | 中 | システム構成の可視化 |
| **Phase 3** | 実装 | - | コーディング |
| **Phase 5** | 設計書 | 高 | 実装内容の文書化 |
| | 完全版API仕様書 | 高 | 全エンドポイント仕様 |
| | アーキテクチャ図 | 高 | 確定版の図 |
| | データモデル文書 | 高 | ER図、スキーマ |

**推奨パターン**: AI最適化型 (Phase 2A → Phase 3 → Phase 5並行)

---

### 既存システムの大規模改修

| フェーズ | 成果物 | 優先度 | 目的 |
|---------|--------|:------:|------|
| **Phase 2A** | ADR (変更方針) | 高 | 変更の理由と方法 |
| | API契約書 | 中 | 変更されるAPI |
| | 制約条件文書 | 高 | 後方互換性要件 |
| **Phase 3** | 実装 | - | コーディング |
| **Phase 5** | 設計書 | 高 | 変更内容の文書化 |
| | マイグレーション計画書 | 高 | 安全な移行手順 |
| | 更新版ADR | 中 | 実装中の追加決定 |

**推奨パターン**: AI最適化型または従来型 (規模による)

---

### 複数チーム連携プロジェクト

| フェーズ | 成果物 | 優先度 | 目的 |
|---------|--------|:------:|------|
| **Phase 2A** | ADR | 高 | 技術決定の共有 |
| | API契約書 | 高 | チーム間の契約合意 |
| | 制約条件文書 | 高 | 共通理解の確立 |
| | 技術提案書 | 高 | ステークホルダー承認 |
| **Phase 5** | 設計書 (事前作成) | 高 | 実装前の実装後設計 |
| **(実装前)** | 完全版API仕様書 | 高 | 契約の詳細化 |
| **Phase 3** | 実装 | - | 各チームが実装 |
| **Phase 5** | 設計書 (更新) | 中 | 最終版の整備 |
| **(実装後)** | アーキテクチャ図 | 高 | 全体構成の確定 |

**推奨パターン**: 従来型 (Phase 2A → Phase 5詳細 → Phase 3)

---

### 小規模機能追加

| フェーズ | 成果物 | 優先度 | 目的 |
|---------|--------|:------:|------|
| **Phase 2A** | スキップ | - | 既存設計に従う |
| **Phase 3** | 実装 | - | コーディング |
| **Phase 5** | 設計書 (更新) | 低 | 変更点のみ記録 |
| | 更新版ADR | △ | 重要な決定があれば |

**推奨パターン**: リバースエンジニアリング型 (Phase 3 → Phase 5簡易版)

---

## タイミングマトリクス

### パターンA: AI最適化型 (推奨)

```
Week 0: Phase 2A (1-2日)
  └─ ADR, API契約, 制約条件

Week 1-2: Phase 3 実装 + Phase 5 並行開始
  ├─ 実装: メイン作業
  └─ Phase 5: 完成部分から順次文書化 (20-30%の時間)

Week 3: Phase 4 レビュー + Phase 5 完成
  ├─ レビュー: メイン作業
  └─ Phase 5: 残りの文書化完了 (30-40%の時間)

Week 4: Phase 5 デプロイ
```

**リードタイム**: 4週間
**Phase 5作業時間**: Phase 3-4期間に分散

---

### パターンB: 従来型

```
Week 0-1: Phase 2A (1-2日) + Phase 5 (3-5日)
  ├─ Phase 2A: ADR, API契約, 制約条件
  └─ Phase 5: 実装後設計 (実装前)

Week 2-3: Phase 3 実装

Week 4: Phase 4 レビュー + Phase 5 更新 (1日)

Week 5: Phase 5 デプロイ
```

**リードタイム**: 5週間
**Phase 5作業時間**: 実装前に集中 + 実装後に更新

---

### パターンC: リバースエンジニアリング型

```
Week 1-2: Phase 3 実装
  └─ Phase 2A スキップ

Week 3: Phase 4 レビュー

Week 3-4: Phase 5 (2-3日)
  └─ 実装完了後に文書化

Week 4: Phase 5 デプロイ
```

**リードタイム**: 4週間
**Phase 5作業時間**: 実装後に集中

---

## 役割別責任マトリクス (RACI)

### Phase 2A (実装前設計)

| 成果物 | テックリード | アーキテクト | エンジニア | PM | QA |
|--------|:----------:|:-----------:|:---------:|:--:|:--:|
| ADR | A/R | C | C | I | - |
| API契約書 | A | C | R | I | C |
| 制約条件文書 | A | C | R | I | C |
| 技術提案書 | A/R | R | C | I | - |

---

### Phase 5 (実装後設計)

| 成果物 | テックリード | アーキテクト | エンジニア | PM | QA |
|--------|:----------:|:-----------:|:---------:|:--:|:--:|
| 設計書 | A | R | R | I | C |
| 完全版API仕様書 | A | C | R | I | C |
| アーキテクチャ図 | A | R | R | I | - |
| データモデル文書 | A | C | R | I | - |
| 設計レビュー記録 | A | R | C | I | R |

**RACI凡例**:
- **R** (Responsible): 実行責任者
- **A** (Accountable): 説明責任者
- **C** (Consulted): 相談先
- **I** (Informed): 報告先

---

## AI活用による工数削減

### Phase 5 の効率化

| 成果物 | 従来工数 | AI活用工数 | 削減率 |
|--------|---------|-----------|--------|
| 設計書 | 8-16h | 4-8h | 50% |
| 完全版API仕様書 | 4-8h | 1-2h | 75% |
| アーキテクチャ図 | 4-6h | 2-3h | 40% |
| データモデル文書 | 4-8h | 2-4h | 50% |
| **合計** | **20-38h** | **9-17h** | **55%** |

### AI活用手法

```yaml
architecture_diagrams:
  tool: "Mermaid, PlantUML (コードから自動生成)"
  reduction: "40-70%"

api_specification:
  tool: "Swagger Codegen, OpenAPI Generator"
  reduction: "70-80%"

design_document:
  tool: "ChatGPT, Claude (ドラフト生成)"
  reduction: "50%"

data_model:
  tool: "SchemaSpy, dbdocs (スキーマから生成)"
  reduction: "50-60%"
```

---

## 成果物の相互関係

### Phase 2A → Phase 3 → Phase 5 の流れ

```
Phase 2A (実装前設計)
  ├─ ADR (初版)
  ├─ API契約書
  └─ 制約条件文書
      │
      ▼ (実装の方向性を提供)
      │
Phase 3 (実装)
  ├─ 実装コード
  ├─ テストコード
  └─ 実装中の発見事項
      │
      ▼ (実装内容を反映)
      │
Phase 5 (実装後設計)
  ├─ 設計書 ← Phase 2A + 実装内容
  ├─ 完全版API仕様書 ← API契約書を拡張
  ├─ アーキテクチャ図 ← 実装を図示
  ├─ データモデル文書 ← スキーマから生成
  └─ 更新版ADR ← 実装中の追加決定
```

---

## チェックリスト

### Phase 2A 完了チェック

```yaml
必須成果物:
  - [ ] ADRが作成されている (重要な技術決定)
  - [ ] API契約書が作成されている (該当する場合)
  - [ ] 制約条件文書が作成されている

品質:
  - [ ] 実装チームが開始できる状態である
  - [ ] チーム間の契約が合意されている
  - [ ] セキュリティ・パフォーマンス要件が明確である

承認:
  - [ ] テックリードの承認を得ている
  - [ ] ステークホルダーの承認を得ている (必要な場合)
```

---

### Phase 5 完了チェック

```yaml
必須成果物:
  - [ ] 設計書が完成している
  - [ ] 完全版API仕様書が完成している (該当する場合)
  - [ ] アーキテクチャ図が完成している
  - [ ] データモデル文書が完成している (該当する場合)

品質:
  - [ ] 実装内容と一致している
  - [ ] 新メンバーのオンボーディングに使える
  - [ ] 運用チームが必要な情報を得られる
  - [ ] 技術的負債が明記されている

承認:
  - [ ] セルフレビューが完了している
  - [ ] ピアレビューが完了している
  - [ ] テックリードの承認を得ている
```

---

## クイックスタートガイド

### 新規プロジェクトを始める場合

```
ステップ1: プロジェクトタイプの判断
└─ 新規/既存、規模、チーム構成を確認

ステップ2: 実行パターンの選択
├─ AI最適化型 (推奨・デフォルト)
├─ 従来型 (複数チーム連携)
└─ リバースエンジニアリング型 (小規模)

ステップ3: Phase 2A の実施 (1-2日)
├─ ADRテンプレートを使用
├─ API契約書を作成
└─ 制約条件を文書化

ステップ4: Phase 3 実装開始

ステップ5: Phase 5 の実施 (並行 or 実装後)
├─ 設計書を作成
├─ AI活用で効率化
└─ レビュー・承認
```

---

## リソース

### テンプレート一覧

```yaml
phase_2a_templates:
  location: "/devin-organization-standards/08-templates/"
  files:
    - adr-template.md (既存)
    - api-contract-template.md (新規)
    - constraints-template.md (新規)

phase_5_templates:
  location: "/devin-organization-standards/08-templates/"
  files:
    - design-document-template.md (既存)
    - api-specification-template.md (既存)
    - data-model-template.md (既存)
    - design-review-template.md (既存)
```

### 詳細ガイド

```yaml
guides:
  - phase-2a-preliminary-design-guide.md (新規)
  - phase-5-detailed-design-guide.md (新規)
  - revised-development-process-overview.md (新規)
```

---

## よくある質問

### Q1: なぜ Phase 2 を分割するのですか?

**A**: AI開発の特性を活かすためです:
- **Phase 2A**: 最小限の実装前設計で早期実装開始
- **Phase 5**: 実装された内容を正確に文書化
- **効果**: 手戻り削減、並行作業、リードタイム短縮

---

### Q2: すべてのプロジェクトで Phase 2A と Phase 5 の両方が必要ですか?

**A**: いいえ。プロジェクトタイプにより:
- **小規模改修**: Phase 2A スキップ可
- **中小規模**: 両方実施 (推奨)
- **大規模**: 両方必須

---

### Q3: Phase 5 は並行と実装後のどちらが良いですか?

**A**: プロジェクトにより:
- **並行 (推奨)**: リードタイム短縮、知識の鮮度維持
- **実装後**: 確定情報のみ記録、集中作業可能

---

## 改訂履歴

| バージョン | 日付 | 変更内容 |
|----------|------|---------|
| 2.1.0 | 2025-11-20 | Phase番号リナンバリング対応（移行期間: 〜2025-12-20） |
| 2.0.0 | 2025-11-12 | Phase 2を Phase 2A/2-B に分割、全面改訂 |
| 1.0.0 | 2025-11-11 | 初版作成 |

---

**この改訂版マトリクスにより、AI開発に最適化された設計プロセスを実現します。**
